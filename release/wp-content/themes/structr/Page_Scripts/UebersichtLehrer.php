
<html>
<head>

	   <meta charset='utf-8' />





    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>jQuery UI Dialog - Default functionality</title>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	
	<link rel="stylesheet" type="text/css" href="/wp-content/themes/structr/Page_Scripts/DataTables-1.10.19/media/css/jquery.dataTables.css">
	<link rel="stylesheet" type="text/css" href="/wp-content/themes/structr/Page_Scripts/DataTables-1.10.19/examples/resources/syntax/shCore.css">
	<link rel="stylesheet" type="text/css" href="/wp-content/themes/structr/Page_Scripts/DataTablesEditor/css/editor.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="/wp-content/themes/structr/Page_Scripts/DataTablesEditor/css/editor.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="/wp-content/themes/structr/Page_Scripts/DataTablesEditor/css/editor.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">

    <!--<link rel="stylesheet" href="/resources/demos/style.css">-->

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>





    <link rel='stylesheet' href='/wp-content/themes/structr/Page_Scripts/fullcalendar/fullcalendar.css' />

    <!--<script src='/wp-content/themes/structr/Page_Scripts/fullcalendar/lib/jquery.min.js'></script>-->

    <script src='/wp-content/themes/structr/Page_Scripts/fullcalendar/lib/moment.min.js'></script>

    <script src='/wp-content/themes/structr/Page_Scripts/fullcalendar/fullcalendar.js'></script>

    <script src='/wp-content/themes/structr/Page_Scripts/fullcalendar/locale-all.js'></script>
	

    <meta charset='utf-8' />





    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>jQuery UI Dialog - Default functionality</title>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	
	<link rel="stylesheet" type="text/css" href="/wp-content/themes/structr/Page_Scripts/DataTables-1.10.19/media/css/jquery.dataTables.css">
	<link rel="stylesheet" type="text/css" href="/wp-content/themes/structr/Page_Scripts/DataTables-1.10.19/examples/resources/syntax/shCore.css">
	<link rel="stylesheet" type="text/css" href="/wp-content/themes/structr/Page_Scripts/DataTablesEditor/css/editor.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="/wp-content/themes/structr/Page_Scripts/DataTablesEditor/css/editor.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="/wp-content/themes/structr/Page_Scripts/DataTablesEditor/css/editor.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">

    <!--<link rel="stylesheet" href="/resources/demos/style.css">-->

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>





    <link rel='stylesheet' href='/wp-content/themes/structr/Page_Scripts/fullcalendar/fullcalendar.css' />

    <!--<script src='/wp-content/themes/structr/Page_Scripts/fullcalendar/lib/jquery.min.js'></script>-->

    <script src='/wp-content/themes/structr/Page_Scripts/fullcalendar/lib/moment.min.js'></script>

    <script src='/wp-content/themes/structr/Page_Scripts/fullcalendar/fullcalendar.js'></script>

    <script src='/wp-content/themes/structr/Page_Scripts/fullcalendar/locale-all.js'></script>
	
	<script src="https://cdn.tiny.cloud/1/p4y59yu91l1ttdi8h066ovomyunbzi9p44zqccnlmn9ly5ge/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
	
	<script type="text/javascript" language="javascript" src="/wp-content/themes/structr/Page_Scripts/DataTables-1.10.19/media/js/jquery.dataTables.js"></script>
	<script type="text/javascript" language="javascript" src="/wp-content/themes/structr/Page_Scripts/DataTables-1.10.19/examples/resources/syntax/shCore.js"></script>
	<script type="text/javascript" language="javascript" src="/wp-content/themes/structr/Page_Scripts/DataTables-1.10.19/examples/resources/demo.js"></script>
	<script type="text/javascript" language="javascript" src="/wp-content/themes/structr/Page_Scripts/DataTablesEditor/js/dataTables.editor.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/dataTables.buttons.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.flash.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/select/1.3.0/js/dataTables.select.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
	
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.html5.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.print.min.js"></script>

	
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.html5.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.print.min.js"></script>

	

   

	
</head>
<!--
			<div class="demo-html width=50%"></div>
			<table id="example" class="display" style="width:50%">
				<thead>
					<tr>
						<th>Note</th>
						<th>Name</th>
						<th>Gewichtung</th>
						<th>Datum</th>
					</tr>
				</thead>
				
			</table>
			
</html>-->
	
	
	
	<script>
			tinymce.init( {
	   
		selector: '#lernziele2',
		height: 600
	} );
	 var table;
		var table1;
	$(document).ready(function() {
		
  
    var calendar = $('#calendarklbu').fullCalendar({

                editable:false,
		   
		   height:400,

                defaultView:'listMonth',

                header:{

                    left:'prev,next today',

                    center:'title',

                    right:'month,agendaWeek,agendaDay,listMonth'

                },

                navLinks: true, // can click day/week names to navigate views

                editable: true,

                locale: 'de',

                theme:'jquery-ui',

                eventLimit: true, // allow "more" link when too many events

                events:  "/wp-content/themes/structr/Page_Scripts/GetKlBuValues.php?q="+ document.getElementById('curruser').value,

                eventTextColor: 'black',
		
		        cursor: 'pointer',

                selectable:true,

		         displayEventTime : false,
		   
                selectHelper:true,
		
		eventMouseover: function(calEvent, domEvent) {
		
		},
	
		
		
		eventClick:function(event)

                {
                           document.getElementById('Kursnm').value=event.kursid;
					
					
							 startevtime = $.fullCalendar.formatDate(event.start, "HH:mm");

                    endevtime = $.fullCalendar.formatDate(event.end, "HH:mm");	
							
						
								 if (window.XMLHttpRequest) {

                        // code for IE7+, Firefox, Chrome, Opera, Safari

                        xmlhttp = new XMLHttpRequest();

                    } else {

                        // code for IE6, IE5

                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                    }

                    xmlhttp.onreadystatechange = function () {

                        if (this.readyState == 4 && this.status == 200) {

                            document.getElementById("lernende").innerHTML = this.responseText;

                        }

                    };



                    xmlhttp.open("GET", "/Ajax_Scripts/showlernendeLehrer.php?q=" + event.kursid +  "&h=" + event.datum +"&k="+document.getElementById("lehrer").value +"&j="+event.lektionen +"&s="+startevtime+ "&e="+endevtime , true);

                   xmlhttp.send();

					check();
					
                     window.location.hash = "lernende";
                            },
	eventRender: function (event, element) {
    element.find('.fc-title').html(event.title);/*For Month,Day and Week Views*/
    element.find('.fc-list-item-title').html(event.title);/*For List view*/

	}
		
    
		   
                
        });
	//var data= [{"Note":"6","Name":"dsgs","Gewichtung":"0","Datum":"2019-06-16"},{"Note":"2","Name":"dsgs","Gewichtung":"0","Datum":"2019-06-16"},{"Note":"3.7","Name":"dsgs","Gewichtung":"25","Datum":"2019-06-16"}]  ;
	
 
  
 // function format (data) {
//	  var i;  
//	  var note=null;
//	  
//	  for(i=1; i<10; i++){
//		var Notedt= data["Note"+i];
//		var  Namedt=data["Name"+i];
//		var  Gewichtungdt= data["Gewichtung"+i];
//		var  Datumdt=data["Datum"+i];
//		 
//		if ((Notedt)>1 && Notedt<=6){
//	  var z=null;
//	 var z= '<div class="details-container"><table cellpadding="5" cellspacing="0" border="0" class="details-table">'
//            
//		  +'<tr>'+
//                  '<td class="title">Note'+i+':</td>'+
//                  '<td>'+Notedt+'</td>'+
//		     '<td class="title">Notenname:</td>'+
//		  '<td>'+Namedt+'</td>'+
//		    '<td class="title">Gewichtung:</td>'+
//		   '<td>'+Gewichtungdt+'</td>'+
//		   '<td class="title">Datum:</td>'+
//		   '<td>'+Datumdt+'</td></tr>'+
//			 
//          '</table>'+
//     
//
//		    '</div>';
//		if (note==null){
//	       note=z;
//		}
//			else note=note+z;
//		  }
//		  
//  }
//	  
//	  return note;
//  };
//  
		var new_url= "/wp-content/themes/structr/Page_Scripts/GetAbwesenheitenKompakt_Lehrer.php?l="+document.getElementById("lehrer").value;
		//	var new_url1= "/wp-content/themes/structr/Page_Scripts/GetLernende_Archiv.php?q="+document.getElementById("Semester").value;
                   
		
      $.fn.dataTable.ext.errMode = 'throw';
  table = $('.datatables').DataTable({
	      dom: 'lBfrtip',
        buttons: [
            'copy', 'csv', 'excel', 'pdf', 'print'
        ],
      
	
	    ajax: {
			
			url: new_url,
			
            dataSrc: ""
			
        },
    columns : [
      {
        className      : 'details-control',
        defaultContent : '',
        data           : null,
        orderable      : false
      },
      {data : 'Klasse'},
		{data : 'Kursname'},
		{data : 'Datum'},
		{data : 'Kommentar'},
		{data : 'KommentVer'},
		{data : 'Abwesenheitsdauer'},
		{data : 'Nachname'},
		{data : 'Vorname'},
		{data : 'Lehrer'},
		{data : 'Entschuldigt'}
		
			 
			
	
    
			
		
    ],
    
  
  });

        var new_url2 = "/wp-content/themes/structr/Page_Scripts/GetKurshistorie_Lehrer.php?l=" + document.getElementById("lehrer").value;


       
        table2 = $('.datatables2').DataTable({

            dom: 'lBfrtip',
            buttons: [
                'copy', 'csv', 'excel', 'pdf', 'print'
            ],


            ajax: {

                url: new_url2,

                dataSrc: ""

            },
            columns: [
                {
                    //className      : 'details-control',
                    data: 'ID',

                    orderable: false
                },

                {data: 'Stattgefunden'},
                {data: 'Datum'},
                {data: 'KursID'},
                {data: 'Lehrer'},
                {data: 'Kommentar'},
                {data: 'Lektionen'}


            ],


       
  
  });
 
//  $('.datatables tbody').on('click', 'td.details-control', function () {
//     var tr  = $(this).closest('tr'),
//         row = table.row(tr);
//    
//     if (row.child.isShown()) {
//       tr.next('tr').removeClass('details-row');
//       row.child.hide();
//       tr.removeClass('shown');
//     }
//     else {
//       row.child(format(row.data())).show();
//       tr.next('tr').addClass('details-row');
//       tr.addClass('shown');
//     }
//  });
 

	
		});
		
function tableshow(){
		var new_url= "/wp-content/themes/structr/Page_Scripts/GetLernendeModule.php?q="+document.getElementById("Kursname").value;
	var new_url1= "/wp-content/themes/structr/Page_Scripts/GetLernende.php?q="+document.getElementById("Kursname").value;
	
		
                    
		
	
	table1.ajax.url( new_url1 ).load();
}		
		
		
	</script>
	
	

	
	
	</html>

	<style>
.container {
  margin-top: 15px;
}
.container .details-row td {
  padding: 0;
  margin: 0;
}

.details-container {
  width: 100%;
  height: 100%;
  background-color: #FFF;
  padding-top: 5px;
}

.details-table {
  width: 100%;
  background-color: #FFF;
  margin: 5px;
}

.title {
  font-weight: bold;
}

.iconSettings, td.details-control:before, tr.shown td.details-control:before {
  margin-top: 5px;
  margin-bottom: 10px;
  font-size: 12px;
  position: relative;
  top: 1px;
  display: inline-block;
  font-family: 'Glyphicons Halflings';
  font-style: normal;
  font-weight: 400;
  line-height: 1;
  -webkit-font-smoothing: antialiased;
}

td.details-control {
  cursor: pointer;
  text-align: center;
}
td.details-control:before {
  content: /*'\2b'*/;
}
/*
tr.shown td.details-control:before {
  content: '\2212';
}
*/	</style>
<script>
	

    function getKursname(str){

        location.reload;

        if (str == "") {

            document.getElementById("Kursnm").innerHTML = "";

            return;

        } else {

            if (window.XMLHttpRequest) {

                // code for IE7+, Firefox, Chrome, Opera, Safari

                xmlhttp = new XMLHttpRequest();

            } else {

                // code for IE6, IE5

                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

            }

            xmlhttp.onreadystatechange = function() {

                if (this.readyState == 4 && this.status == 200) {

                    document.getElementById("Kursnm").innerHTML = this.responseText;

                }

            };

            xmlhttp.open("GET","/Ajax_Scripts/getKursnameLehrer.php?q="+str,true);

            xmlhttp.send();

        }

    }

  
  

    function checkKurs(str){

        if (str == "-Select-") {

          alert('Bitte einen Kurs auswählen')

            return;

        }

    }

</script>

<style type="text/css"> 
.clear{
  clear: left;
}

.container {
  width: auto;
  padding: 10px;
  border: 0px solid;
}

.left {
  float: auto;
  width: auto;
  padding: 10px;
	
  border: 2px solid #000000;
  text-align: center;
}
	.leftn {
  float: auto;
  width: auto;
  padding: 10px;
  border: 0px solid;
	
  text-align: center;
}
	.leftn2 {
  float: left;
  width: auto;
  padding: 10px;
  border: 0px solid;
  text-align: center;
}
		.leftn1 {
  float: auto;
  width: auto;
  padding: 10px;
  border: 2px solid;
  text-align: center;
}
</style>

<div class="container">
  <div class="clear"></div>
	
	<div class="left">
   <h4>Mein Klassenbuch</h4>
		<script>

    function getKursname(str){

        location.reload;

        if (str == "") {

            document.getElementById("Kursnm").innerHTML = "";

            return;

        } else {

            if (window.XMLHttpRequest) {

                // code for IE7+, Firefox, Chrome, Opera, Safari

                xmlhttp = new XMLHttpRequest();

            } else {

                // code for IE6, IE5

                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

            }

            xmlhttp.onreadystatechange = function() {

                if (this.readyState == 4 && this.status == 200) {

                    document.getElementById("Kursnm").innerHTML = this.responseText;

                }

            };

            xmlhttp.open("GET","/Ajax_Scripts/getKursnameLehrer.php?q="+str,true);

            xmlhttp.send();

        }

    }

    function test10(str){

        if (str == "") {

            document.getElementById("lernende").innerHTML = "";

            return;

        } else {

            if (window.XMLHttpRequest) {

                // code for IE7+, Firefox, Chrome, Opera, Safari

                xmlhttp = new XMLHttpRequest();

            } else {

                // code for IE6, IE5

                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

            }

            xmlhttp.onreadystatechange = function() {

                if (this.readyState == 4 && this.status == 200) {

                    document.getElementById("lernende").innerHTML = this.responseText;

                }

            };

            xmlhttp.open("GET","/Ajax_Scripts/showlernendeLehrer.php?q="+str+"&k="+document.getElementById("lehrerklbu").value+"&h="+document.getElementById("today").value,true);

            xmlhttp.send();

        }
check();
    }

			
	 function test11(){

        

            if (window.XMLHttpRequest) {

                // code for IE7+, Firefox, Chrome, Opera, Safari

                xmlhttp = new XMLHttpRequest();

            } else {

                // code for IE6, IE5

                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

            }

            xmlhttp.onreadystatechange = function() {

                if (this.readyState == 4 && this.status == 200) {

                    document.getElementById("lernende").innerHTML = this.responseText;

                }

            };

            xmlhttp.open("GET","/Ajax_Scripts/showlernendeLehrer.php?q="+document.getElementById("Kursnm").value+"&k="+document.getElementById("lehrerklbu").value+"&h="+document.getElementById("date").value+"&j="+document.getElementById("Lektionen").value + "&k="+document.getElementById("tookplace").checked,true);

            xmlhttp.send();

        

		
		check();
		
    }		
			
    function testdate(str){

        if (str == "") {

            document.getElementById("lernende").innerHTML = "";

            return;

        } else {

            if (window.XMLHttpRequest) {

                // code for IE7+, Firefox, Chrome, Opera, Safari

                xmlhttp = new XMLHttpRequest();

            } else {

                // code for IE6, IE5

                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

            }

            xmlhttp.onreadystatechange = function() {

                if (this.readyState == 4 && this.status == 200) {

                    document.getElementById("lernende").innerHTML = this.responseText;

                }

            };

            xmlhttp.open("GET","/Ajax_Scripts/showlernendeLehrer.php?q="+document.getElementById("Kursnm").value+"&k="+document.getElementById("lehrerklbu").value+"&h="+str,true);

            xmlhttp.send();

        }
check();
    }

    function checkKurs(str){

        if (str == "-Select-") {

          alert('Bitte einen Kurs auswählen')

            return;

        }

    }
				 function check(){


  setTimeout(function(){
	  
	  
	  var count = document.getElementById("count").value;
	  var i;
	  
	  for (i=1 ; i<=count ;i++){
		  
		  var radio= "Dauer"+i;
		  var abw ="abw"+i;
	      var abw= document.getElementById(abw).value;
		  
	  
	  document.querySelector('input[name="'+ radio + '"][value="' + abw  + '"]').checked = true;
	 
	  }				   
					   
					   }, 1500);
        

    }

</script>

<?php

include 'db.php';





$isEntrykl= "Select Klassenbuch From sv_Settings ";

$resultkl = mysqli_query($con, $isEntrykl);



while( $linekl= mysqli_fetch_assoc($resultkl))

{

$isKlBu=$linekl['Klassenbuch'];	
}
global $current_user;

get_currentuserinfo();



/* echo 'Username: ' . $current_user-&gt;user_login . "\n";

echo 'User email: ' . $current_user-&gt;user_email . "\n";

echo 'User level: ' . $current_user-&gt;user_level . "\n";

echo 'User first name: ' . $current_user-&gt;user_firstname . "\n";

echo 'User last name: ' . $current_user-&gt;user_lastname . "\n";

echo 'User display name: ' . $current_user-&gt;display_name . "\n";

echo 'User ID: ' . $current_user-&gt;ID . "\n";



*/

$heute=date("Y-m-d");



?>

<br><br>

Lehrperson:

<br>

<?php



$isEntry= "Select ID From sv_Lehrpersonen where User_ID=$current_user->ID";

$result = mysqli_query($con, $isEntry);



while( $line2= mysqli_fetch_assoc($result))

{

    $value=$line2['ID'];



    $isEntry= "Select Nachname, Vorname From sv_Lehrpersonen WHERE ID='$value'";

    $result = mysqli_query($con, $isEntry);

    while( $line3= mysqli_fetch_array($result))

    {

        $Name = $line3['Nachname'];

        $Vorname = $line3['Vorname'];



    }







    echo '<form action=" /DBFuellung/DBFuellungKlbu.php" method="POST">';



    echo '<input class="insertframe" id="lehrerklbu" name="lehrerklbu" readonly="readonly" type="text" value="'.$Vorname .' '.$Name .' ID:'. $value .'" />' ;

    $Lehrer=$Vorname .' '.$Name .' ID:'. $value;

}




	
if ($isKlBu=="true"){
	
	
echo 'Bitte den Termin des Kurses im Kalender anklicken, um das Klassenbuch auszufüllen!!';
echo '<div id="calendarklbu"></div>';
echo '<br><br>';
echo 'Kursname:<br>';
echo '<input id="Kursnm" name="Kursnm" required="required"  onchange="test10(this.value)" readonly=readonly>';
	
}	else {
	echo '	<br><br>';

echo '<select id="Kursnm" name="Kursnm" required="required"  onchange="test10(this.value)">';

    

    include 'db.php';

    

    preg_match("/:(.*)/", $Lehrer, $output_array);

    $Lehrer=$output_array[1];



    $y=0;







    $isEntry= "Select Kurs1, Kurs2, Kurs3, Kurs4, Kurs5, Kurs6, Kurs7, Kurs8, Kurs9,Kurs10,Kurs11,Kurs12,Kurs13,Kurs14,Kurs15,Kurs16,Kurs17, Kurs18, Kurs19, Kurs20, Kurs21, Kurs22, Kurs23, Kurs24, Kurs25,Kurs26,Kurs27,Kurs28,Kurs29,Kurs30 From sv_Lehrpersonen Where ID = $Lehrer";

    $result = mysqli_query($con,$isEntry);





    echo "<option>" . '-Select-' . "</option>";



    while( $line2= mysqli_fetch_array($result))

    {

        for($x = 1; $x <= 30; $x++)

        {



            $value = $line2['Kurs'.$x];

            if ($value<>"") echo "<option>" . $value . "</option>";



        }

    }

    



echo '</select>';
	}
		?>
		
		
	
<input type="hidden" name="today" id="today" value="<?php echo $heute ?>" class="text ui-widget-content ui-corner-all" readonly >


<div id="lernende"><b>Abwesenheiten werden hier eingetragen...</b></div>

<br><br>

<input name="Senden" type="submit" value="Senden" onclick="checkKurs(Kursnm.value)" />



</form>&nbsp;




	</div>
<div class="leftn">
	<br>
</div>
 <div class="left">
   <h4>Meine Kurstermine</h4>
	  <?php

    global $current_user;

    get_currentuserinfo();

    

    ?>
<input id="kidhidden" type="hidden">
	
	<input id="farbehid" type="hidden">
    
	
    <script>

		function alertcol(){
			
			alert(document.getElementById('test').value);
		}


            function reload() {

                var x = document.querySelector("#klassedrop").value;

                var y = document.querySelector("#Lehrpersondrop").value;

                window.location.href = "/terminkalender?&klasse=" + x + "&Lehrpersondr=" + y;

            }

function getKursname(str){
if (str == "") {
       
        return;
    } else {
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("kursid").innerHTML = this.responseText;
            }
        };
        xmlhttp.open("GET","/Ajax_Scripts/getKursnamewthoutselect.php?q="+str,true);
        xmlhttp.send();
       
    }
}
		function getKursnamepre(str){
if (str == "") {
       
        return;
    } else {
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("kursid").innerHTML = this.responseText;
            }
        };
        xmlhttp.open("GET","/Ajax_Scripts/getKursnamewthoutselect.php?q="+str+ "&k="+ document.getElementById('kidhidden').value,true);
        xmlhttp.send();
       
    }
}
function getcolor(str1){
		
		
	 if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("farbediv").innerHTML = this.responseText ;
            }
        };
        xmlhttp.open("GET","/Ajax_Scripts/getcolorAK.php?q="+str1+"&c="+document.getElementById('farbehid').value.substring(1,7),true);
        xmlhttp.send();
		
	}

    </script>

    <input type="hidden" name="curruser" id="curruser" value="<?php echo $current_user->ID ?>" class="text ui-widget-content ui-corner-all" readonly >

    


<?php

include 'db.php';

$isEntry= "Select ID From sv_Lehrpersonen where User_ID='$current_user->ID'";

$result = mysqli_query($con, $isEntry);



while( $line2= mysqli_fetch_assoc($result))

{

    $value=$line2['ID'];



    $isEntry= "Select Nachname, Vorname From sv_Lehrpersonen WHERE ID='$value'";

    $result = mysqli_query($con, $isEntry);

    while( $line3= mysqli_fetch_array($result))

    {

        $Name = $line3['Nachname'];
		
		

        $Vorname = $line3['Vorname'];



    }







    


   
    $Lehrer=$Vorname .' '.$Name .' ID:'. $value;
	
}

$IDLP=$value;

?>
	
	<input  id="lehrer" name="lehrer" readonly="readonly" type="hidden" value="<?php echo $Lehrer; ?>" />
</em>

    <script>

        $(document).ready(function() {



            var calendar = $('#calendar').fullCalendar({



                editable:true,

                defaultView:'listMonth',

                header:{

                    left:'prev,next today',

                    center:'title',

                    right:'month,agendaWeek,agendaDay,listMonth'

                },
						height: 450,

                theme:'jquery-ui',

                navLinks: true, // can click day/week names to navigate views

                editable: true,

                locale: 'de',

                eventLimit: true, // allow "more" link when too many events

                events:  "/wp-content/themes/structr/Page_Scripts/GetCalendarValues.php?q="+document.getElementById('curruser').value,

                eventTextColor: 'black',

                selectable:true,

                selectHelper:true,

                select: function(startev, endev, allDay) {





                    var dialog, form,



                        // From http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#e-mail-state-%28type=email%29

                        tips = $(".validateTips");



                    startevdate = $.fullCalendar.formatDate(startev, "YYYY-MM-DD");

                    endevdate = $.fullCalendar.formatDate(endev, "YYYY-MM-DD");

                    startevtime = $.fullCalendar.formatDate(startev, "HH:mm:ss");

                    endevtime = $.fullCalendar.formatDate(endev, "HH:mm:ss");

                    startdatepicker = startevdate;

                    enddatepicker = endevdate;

                    starttimepicker = startevtime;

                    endtimepicker = endevtime;











                        dialog = $("#dialog-form").dialog({



                            autoOpen: false,

                            height: 800,

                            width: 300,

                            modal: true,





                            open: function () {

                                document.getElementById('startdate').value = startdatepicker;

                                document.getElementById('enddate').value = enddatepicker;

                                document.getElementById('starttime').value = starttimepicker;

                                document.getElementById('endtime').value = endtimepicker;

                                document.getElementById('title').value = "";

                                document.getElementById('zimmer').value = "";

                                document.getElementById('kursname').value = "";

                                document.getElementById('kursid').value = "";

                                document.getElementById('klasse').value = "";
								
							    document.getElementById('lehrpers').value = <?php echo $Name; ?>;

                                document.getElementById('farbe').value = "";
								
								document.getElementById('kursidinp').value = "";

                            },



                            buttons: {

                                "Speichern":function()  {



                                    title = $("#title"),

                                        startCustdate = $("#startdate"),

                                        endCustdate = $("#enddate"),

                                        startCusttime = $("#starttime"),

                                        endCusttime = $("#endtime"),

                                        allFields = $([]).add(title).add(startCustdate).add(endCustdate).add(startCusttime).add(endCusttime);





                                    var valid = true;

                                    allFields.removeClass("ui-state-error");



                                    $("#users tbody").append("<tr>" +

                                        "<td>" + title.val() + "</td>" +

                                        "<td>" + startCustdate.val() + "</td>" +

                                        "<td>" + endCustdate.val() + "</td>" +

                                        "<td>" + startCusttime.val() + "</td>" +

                                        "<td>" + endCusttime.val() + "</td>" +

                                        "</tr>");





                                    if (window.XMLHttpRequest) {

                                        // code for IE7+, Firefox, Chrome, Opera, Safari

                                        xmlhttp = new XMLHttpRequest();

                                    } else {

                                        // code for IE6, IE5

                                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                                    }

                                    xmlhttp.onreadystatechange = function () {

                                        if (this.readyState == 4 && this.status == 200) {

                                            document.getElementById("respond").innerHTML = this.responseText;

                                        }

                                    };





                                    xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/insertCalendar.php?q=" + title.val() + "&k=" + startCustdate.val() + "T" + startCusttime.val() + "&g=" + endCustdate.val() + "T" + endCusttime.val()+ "&klasse=" + document.getElementById('klasse').value + "&kursid=" + document.getElementById('kursid').value + "&kursname=" + document.getElementById('kursname').value + "&farbe=" + document.getElementById('farbe').value.substring(1,7) + "&zimmer=" + document.getElementById('zimmer').value + "&l=" + document.getElementById('lehrpers').value +"&kursidinp=" + document.getElementById('kursidinp').value, true);

                                    xmlhttp.send();



                                    dialog.dialog("close");



                                    



                                    calendar.fullCalendar('refetchEvents');

                                },



                                Cancel: function () {

                                    dialog.dialog("close");
									
									 calendar.fullCalendar('refetchEvents');

                                },





                            },

                            close: function () {

                                calendar.fullCalendar('refetchEvents');



                            }

                        });





                        dialog.dialog("open");



                    },













                editable:true,

                eventResize:function(event) {

                    var start = $.fullCalendar.formatDate(event.start, "Y-MM-DD HH:mm:ss");

                    var end = $.fullCalendar.formatDate(event.end, "Y-MM-DD HH:mm:ss");

                    var title = event.title;

                    var id = event.id;

                    var color = event.color;

                    if (window.XMLHttpRequest) {

                        // code for IE7+, Firefox, Chrome, Opera, Safari

                        xmlhttp = new XMLHttpRequest();

                    } else {

                        // code for IE6, IE5

                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                    }

                    xmlhttp.onreadystatechange = function () {

                        if (this.readyState == 4 && this.status == 200) {

                            document.getElementById("respond").innerHTML = this.responseText;

                        }

                    };



                    xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/updateCalendarDrop.php?k=" + start + "&g=" + end + "&f=" + id, true);

                    xmlhttp.send();

                    calendar.fullCalendar('refetchEvents');

                    alert('Event Update');







                    

                },



                eventDrop:function(event)

                {

                    var start = $.fullCalendar.formatDate(event.start, "Y-MM-DD HH:mm:ss");

                    var end = $.fullCalendar.formatDate(event.end, "Y-MM-DD HH:mm:ss");

                    var title = event.title;

                    var id = event.id;



                    if (window.XMLHttpRequest) {

                        // code for IE7+, Firefox, Chrome, Opera, Safari

                        xmlhttp = new XMLHttpRequest();

                    } else {

                        // code for IE6, IE5

                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                    }

                    xmlhttp.onreadystatechange = function () {

                        if (this.readyState == 4 && this.status == 200) {

                            document.getElementById("respond").innerHTML = this.responseText;

                        }

                    };



                    xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/updateCalendarDrop.php?k=" + start + "&g=" + end + "&f=" + id, true);

                    xmlhttp.send();

                    calendar.fullCalendar('refetchEvents');

                    alert("Event Updated");

                    },



                    

                



                      eventClick:function(event)

                {

                   var dialog,form,

                    dialog = $("#dialog-form1").dialog({



                        autoOpen: false,

                        height: 800,

                        width: 300,

                        modal: true,





                        open: function () {

                            var startdate = $.fullCalendar.formatDate(event.start, "Y-MM-DD");

                            var enddate = $.fullCalendar.formatDate(event.end, "Y-MM-DD");

                            var starttime = $.fullCalendar.formatDate(event.start, "HH:mm:ss");

                            var endtime = $.fullCalendar.formatDate(event.end, "HH:mm:ss");

                            var id= event.ID;

                            document.getElementById('startdate').value = startdate;

                            document.getElementById('enddate').value = enddate;

                            document.getElementById('starttime').value = starttime;

                            document.getElementById('endtime').value = endtime;

                            document.getElementById('title').value = event.title;

                            document.getElementById('zimmer').value = event.zimmer;
							document.getElementById('kidhidden').value=event.kursid;

                            
							getKursnamepre(event.klasse);
							
							 document.getElementById('farbehid').value = event.color;
							
							getcolor(event.kursid);
                           
							document.getElementById('kursname').value = event.kursname;

                            document.getElementById('kursid').value = event.kursid;
							
							 document.getElementById('kursidinp').value = "";

                            document.getElementById('klasse').value = event.klasse;

                            document.getElementById('lehrpers').value = event.lehrperson;

                            document.getElementById('farbe').value = event.color;
                        },



                        buttons: {

                            "Speichern": function(){

           var farbe= document.getElementById('farbe').value.substring(1,7);

                                title = $("#title");

                                    startCustdate = $("#startdate");

                                    endCustdate = $("#enddate");

                                    startCusttime = $("#starttime");

                                    endCusttime = $("#endtime");

                                    allFields = $([]).add(title).add(startCustdate).add(endCustdate).add(startCusttime).add(endCusttime);





                                var valid = true;

                                allFields.removeClass("ui-state-error");



                                $("#users tbody").append("<tr>" +

                                    "<td>" + title.val() + "</td>" +

                                    "<td>" + startCustdate.val() + "</td>" +

                                    "<td>" + endCustdate.val() + "</td>" +

                                    "<td>" + startCusttime.val() + "</td>" +

                                    "<td>" + endCusttime.val() + "</td>" +

                                    "</tr>");





                                if (window.XMLHttpRequest) {

                                    // code for IE7+, Firefox, Chrome, Opera, Safari

                                    xmlhttp = new XMLHttpRequest();

                                } else {

                                    // code for IE6, IE5

                                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                                }

                                xmlhttp.onreadystatechange = function () {

                                    if (this.readyState == 4 && this.status == 200) {

                                        document.getElementById("respond").innerHTML = this.responseText;

                                    }

                                };





                                xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/updateCalendar.php?q=" + title.val() + "&k=" + startCustdate.val() + "T" + startCusttime.val() + "&g=" + endCustdate.val() + "T" + endCusttime.val()+  "&f=" + event.id  + "&kursid=" + document.getElementById('kursid').value + "&kursname=" + document.getElementById('kursname').value  + "&zimmer=" + document.getElementById('zimmer').value + "&l=" + document.getElementById('lehrpers').value + "&klasse=" + document.getElementById('klasse').value + "&farbe=" + farbe +"&kursidinp=" + document.getElementById('kursidinp').value, true);

                                xmlhttp.send();



                                dialog.dialog("close");







                                calendar.fullCalendar('refetchEvents');

                            },

                             "Löschen":function(){

                                if(confirm("Are you sure you want to remove it?")) {

                                     var id = event.id;

                                     if (window.XMLHttpRequest) {

                                         // code for IE7+, Firefox, Chrome, Opera, Safari

                                         xmlhttp = new XMLHttpRequest();

                                     } else {

                                         // code for IE6, IE5

                                         xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                                     }

                                     xmlhttp.onreadystatechange = function () {

                                         if (this.readyState == 4 && this.status == 200) {

                                             document.getElementById("respond").innerHTML = this.responseText;

                                         }

                                     };



                                     xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/deleteCalendar.php?f=" + id, true);

                                     xmlhttp.send();

                                     calendar.fullCalendar('refetchEvents');

                                     alert("Event Removed");

                                 }

                             },

                            Cancel: function () {

                                dialog.dialog("close");
								 calendar.fullCalendar('refetchEvents');

                            },





                        },

                        close: function () {

                            calendar.fullCalendar('refetchEvents');

                        }

                    });

                    form = dialog.find("form").on("submit", function (event) {

                        event.preventDefault();

                    });

                    dialog.dialog("open");

            },

                    });

                });

    </script>









    

    <style>



        body {

            margin: 40px 10px;

            padding: 0;

            font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;

            font-size: 14px;

        }



       



    </style>





    <script>





        function addUser() {



            title = $("#title"),

                startCustdate = $("#startdate"),

                endCustdate = $("#enddate"),

                startCusttime = $("#starttime"),

                endCusttime = $("#endtime"),

                allFields = $([]).add(title).add(startCustdate).add(endCustdate).add(startCusttime).add(endCusttime);





            var valid = true;

            allFields.removeClass("ui-state-error");



            $("#users tbody").append("<tr>" +

                "<td>" + title.val() + "</td>" +

                "<td>" + startCustdate.val() + "</td>" +

                "<td>" + endCustdate.val() + "</td>" +

                "<td>" + startCusttime.val() + "</td>" +

                "<td>" + endCusttime.val() + "</td>" +

                "</tr>");





            if (window.XMLHttpRequest) {

                // code for IE7+, Firefox, Chrome, Opera, Safari

                xmlhttp = new XMLHttpRequest();

            } else {

                // code for IE6, IE5

                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

            }

            xmlhttp.onreadystatechange = function () {

                if (this.readyState == 4 && this.status == 200) {

                    document.getElementById("respond").innerHTML = this.responseText;

                }

            };





            xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/insertCalendar.php?q=" + title.val() + "&k=" + startCustdate.val() + "T" + startCusttime.val() + "&g=" + endCustdate.val() + "T" + endCusttime.val()+ "&klasse=" + document.getElementById('klasse').value + "&kursid=" + document.getElementById('kursid').value + "&kursname=" + document.getElementById('kursname').value + "&farbe=" + document.getElementById('farbe').value.substring(1,7) + "&zimmer=" + document.getElementById('zimmer').value+ "&l=" + document.getElementById('lehrpers').value +"&kursidinp=" + document.getElementById('kursidinp').value, true);

            xmlhttp.send();



            dialog.dialog("close");





            alert("Added Successfully");

        }

        $( function() {

            var dialog, form,



                // From http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#e-mail-state-%28type=email%29



                tips = $( ".validateTips" );





            function addUser() {







                    dialog.dialog( "close" );





            }



            dialog = $( "#dialog-form" ).dialog({

                autoOpen: false,

                height: 800,

                width: 300,

                modal: true,

                buttons: {

                    "Titel in Kalender Eintagen": addUser,

                    Cancel: function() {

                        dialog.dialog( "close" );

                    }

                },



            });









        } );



    </script>



    <script>

        $(function(){



                $('input[type=datetime-local]').datepicker({

                        dateFormat : 'YYYY-MM-DD HH:mm:ss'

                    }

                );



        });

    </script>

	<meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {}

        /* The Modal (background) */
        .modal{
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 40%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }

        /* Modal Content */
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }

        /* The Close Button */
        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
        button {
          color: white;
        }

    </style>
</head>

<body>



    </form>





<input name="myBtn1" id="myBtn1" type="hidden" value="Mail versenden"  />

<div id="myModal1" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
       Wenn Sie sich Ihre Termine für den Outlook Kalender zusenden lassen möchten, geben Sie hier Ihre Mailadresse an. Klicken Sie dann "Mail versenden" und es wird eine Mail an die eingegebene Adresse gesendet. Es wird dann eine Datei im Anhang der Mail sein, mit der alle Ihre Termine durch Öffnen der Datei automatisch in den Outlook Kalender eingetragen werden.
<br>
<br>Bitte die Mailadresse eingeben:   <input name="Mail" type="email" id="Mail" />    <input name="Button1" type="button" value="Mail versenden" onclick="Mail()" />

<br><br><br>
<div id='status'></div>

        <span class="close" id="span1">&times;</span>


       
    </div>

</div>



<div id='calendar'></div>

<div id='respond'></div>

<div id='lernende'></div>

</body>

</html>

<style>

    body {

        font-family:"Dosis", "Helvetica Neue", sans-serif;

        color:#232323;

    }



    



</style>

<script>
											 
											    // Get the modal
       

		document.getElementById("myBtn"+1).onclick = function() {
			document.getElementById("myModal"+1).style.display = "block"; 
		}
   // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == document.getElementById("myModal"+1)) {
         document.getElementById("myModal"+1).style.display = "none";
        }
    }
	
	 //When the user clicks on <span> (x), close the modal
     document.getElementById("span"+1).onclick = function() {
       document.getElementById("myModal"+1).style.display = "none";
    }
		  
  
    function Mail(){


            document.getElementById("status").innerHTML = "start sending...";



        if (window.XMLHttpRequest) {

            // code for IE7+, Firefox, Chrome, Opera, Safari

            xmlhttp = new XMLHttpRequest();

        } else {

            // code for IE6, IE5

            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

        }

        xmlhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {

                 document.getElementById("status").innerHTML = this.responseText;

            }

        };

        xmlhttp.open("GET","/wp-content/themes/structr/Page_Scripts/GetCalendarValuesMail.php?q=1000000" + "&k="+ document.getElementById('klassedrop').value + "&l="+ document.getElementById('Lehrpersondrop').value + "&m="+ document.getElementById('Mail').value,true);

        xmlhttp.send();


    }


</script>
	</div>
<div class="leftn">
	<br>
</div>
	<div class="left">
   <h4>Meine Prüfungstermine</h4>
		
		 <?php
	include "db.php";

    global $current_user;

    get_currentuserinfo();



    ?>

    <script>



        function reload() {

            var x = document.querySelector("#klassedrop").value;

            var y = document.querySelector("#Lehrperson").value;

            window.location.href = "/deine-termine?&klasse=" + x + "&Lehrperson=" + y;

        }



    </script>

    <input type="hidden" name="curruser" id="curruser" value="<?php echo $current_user->ID ?>" class="text ui-widget-content ui-corner-all" readonly >

	
<body>



<?php



$isEntry= "Select ID From sv_Lehrpersonen where User_ID=$current_user->ID";

$result = mysqli_query($con, $isEntry);



while( $line2= mysqli_fetch_assoc($result))

{

    $value=$line2['ID'];



    $isEntry= "Select Nachname, Vorname From sv_Lehrpersonen WHERE ID='$value'";

    $result = mysqli_query($con, $isEntry);

    while( $line3= mysqli_fetch_array($result))

    {

        $Name = $line3['Nachname'];

        $Vorname = $line3['Vorname'];



    }







    echo '<form action=" /DBFuellung/DBFuellungKlbu.php" method="POST">';



    

    $Lehrer=$Vorname .' '.$Name .' ID:'. $value;

}



?>

 

   <!-- </br>Klasse:

    <select name="klassedrop" id="klassedrop" onchange="reload()" >



        <?php

/*

        $con = @mysqli_connect('heimmart.mysql.db.internal', "heimmart_test", "Tab_12_3");



        if (!$con) {

            echo "Error: " . mysqli_connect_error();

            exit();

        }

        //echo 'Connected to MySQL';





        $verbunden=mysqli_select_db($con, "heimmart_klingmobile");

        if($verbunden)

            echo '';

        else

            die('DB-Verbindung fehlgeschlagen! ');







        $isEntry= "Select Klasse From sv_Lernende";

        $result1 = mysqli_query($con,$isEntry);

        $resultarr1 = array();

        echo "<option>".$_GET['klasse']."</option>";

        echo "<option></option>";

        while( $line2= mysqli_fetch_assoc($result1))

        {

            $resultarr1[] = $line2['Klasse'];

        }

        $uniquearr1 = array_unique($resultarr1);

        asort($uniquearr1);





        foreach ($uniquearr1 as $value)

        {

            if ($value == $_GET['klasse']){}

            else

            {

                echo "<option>" . $value . "</option>";

            }

        }



        */?>



    </select>

    

    Lehrperson:

    

    <select name="Lehrperson"  id="Lehrperson" onchange="reload()"   >



        <?php

/*        $isEntry= "Select * From sv_Lehrpersonen Order By Nachname ASC";

        $result = mysqli_query($con, $isEntry);



        echo "<option>".$_GET['Lehrperson']."</option>";

        echo "<option></option>";

        while( $line2= mysqli_fetch_array($result))

        {

            $ID = $line2['ID'];

            $Name = $line2['Nachname'];

            $Vorname = $line2['Vorname'];





            echo "<option>" . $Name.' '. $Vorname .' ID:'. $ID. "</option>";

        }

        */?>





    </select>-->

    <script>

        $(document).ready(function() {

            var calendar1 = $('#calendar1').fullCalendar({

                editable:false,

                defaultView:'listMonth',

                header:{

                    left:'prev,next today',

                    center:'title',

                    right:'month,agendaWeek,agendaDay,listMonth'

                },
				height: 450,

                navLinks: true, // can click day/week names to navigate views

                editable: false,

                locale: 'de',

                theme:'jquery-ui',

                eventLimit: true, // allow "more" link when too many events

                events:  "/wp-content/themes/structr/Page_Scripts/GetPruefterminValues.php?q="+ document.getElementById('curruser').value,

                eventTextColor: 'black',

                selectable:true,

                selectHelper:true,

                select: function(startev, endev, allDay) {





                    var dialog, form,



                        // From http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#e-mail-state-%28type=email%29

                        tips = $(".validateTips");



                    startevdate = $.fullCalendar.formatDate(startev, "YYYY-MM-DD");

                    endevdate = $.fullCalendar.formatDate(endev, "YYYY-MM-DD");

                    startevtime = $.fullCalendar.formatDate(startev, "HH:mm:ss");

                    endevtime = $.fullCalendar.formatDate(endev, "HH:mm:ss");

                    startdatepicker = startevdate;

                    enddatepicker = endevdate;

                    starttimepicker = startevtime;

                    endtimepicker = endevtime;











                    dialog = $("#dialog-form").dialog({



                        autoOpen: false,

                        height: 800,

                        width: 600,

                        modal: true,





                        open: function () {

                            document.getElementById('startdate').value = startdatepicker;

                            document.getElementById('enddate').value = enddatepicker;

                            document.getElementById('starttime').value = starttimepicker;

                            document.getElementById('endtime').value = endtimepicker;

                            document.getElementById('title').value = "";

                            document.getElementById('zimmer').value = "";

                            document.getElementById('kursid').value = "";

                            document.getElementById('klasse').value = "";

                            document.getElementById('lehrperson').value = "";

                            document.getElementById('farbe').value = "";
							
							document.getElementById('gewicht').value = "";

                        },



                        buttons: {

                            /*"Speichern":function()  {



                                title = $("#title"),

                                    startCustdate = $("#startdate"),

                                    endCustdate = $("#enddate"),

                                    startCusttime = $("#starttime"),

                                    endCusttime = $("#endtime"),

                                    allFields = $([]).add(title).add(startCustdate).add(endCustdate).add(startCusttime).add(endCusttime);





                                var valid = true;

                                allFields.removeClass("ui-state-error");



                                $("#users tbody").append("<tr>" +

                                    "<td>" + title.val() + "</td>" +

                                    "<td>" + startCustdate.val() + "</td>" +

                                    "<td>" + endCustdate.val() + "</td>" +

                                    "<td>" + startCusttime.val() + "</td>" +

                                    "<td>" + endCusttime.val() + "</td>" +

                                    "</tr>");





                                if (window.XMLHttpRequest) {

                                    // code for IE7+, Firefox, Chrome, Opera, Safari

                                    xmlhttp = new XMLHttpRequest();

                                } else {

                                    // code for IE6, IE5

                                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                                }

                                xmlhttp.onreadystatechange = function () {

                                    if (this.readyState == 4 && this.status == 200) {

                                        document.getElementById("respond").innerHTML = this.responseText;

                                    }

                                };





                                xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/insertCalendar.php?q=" + title.val() + "&k=" + startCustdate.val() + "T" + startCusttime.val() + "&g=" + endCustdate.val() + "T" + endCusttime.val()+ "&klasse=" + document.getElementById('klasse').value + "&kursid=" + document.getElementById('kursid').value + "&kursname=" + document.getElementById('kursname').value + "&farbe=" + document.getElementById('farbe').value + "&zimmer=" + document.getElementById('zimmer').value+ "&lehrperson=" + document.getElementById('lehrperson').value, true);

                                xmlhttp.send();



                                dialog.dialog("close");







                                calendar1.fullCalendar('refetchEvents');

                            },

*/

                            Cancel: function () {

                                dialog.dialog("close");
								
								 calendar1.fullCalendar('refetchEvents');

                            },





                        },

                        close: function () {

                            calendar1.fullCalendar('refetchEvents');



                        }

                    });





                   // dialog.dialog("open");



                },













                editable:false,

                eventResize:function(event) {

                    var start = $.fullCalendar.formatDate(event.start, "Y-MM-DD HH:mm:ss");

                    var end = $.fullCalendar.formatDate(event.end, "Y-MM-DD HH:mm:ss");

                    var title = event.title;

                    var id = event.id;

                    var color = event.color;

                    if (window.XMLHttpRequest) {

                        // code for IE7+, Firefox, Chrome, Opera, Safari

                        xmlhttp = new XMLHttpRequest();

                    } else {

                        // code for IE6, IE5

                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                    }

                    xmlhttp.onreadystatechange = function () {

                        if (this.readyState == 4 && this.status == 200) {

                            document.getElementById("respond").innerHTML = this.responseText;

                        }

                    };



                    xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/updateCalendarDrop.php?k=" + start + "&g=" + end + "&f=" + id, true);

                    xmlhttp.send();

                    calendar.fullCalendar('refetchEvents');

                    alert('Event Update');









                },



                eventDrop:function(event)

                {

                    var start = $.fullCalendar.formatDate(event.start, "Y-MM-DD HH:mm:ss");

                    var end = $.fullCalendar.formatDate(event.end, "Y-MM-DD HH:mm:ss");

                    var title = event.title;

                    var id = event.id;



                    if (window.XMLHttpRequest) {

                        // code for IE7+, Firefox, Chrome, Opera, Safari

                        xmlhttp = new XMLHttpRequest();

                    } else {

                        // code for IE6, IE5

                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                    }

                    xmlhttp.onreadystatechange = function () {

                        if (this.readyState == 4 && this.status == 200) {

                            document.getElementById("respond").innerHTML = this.responseText;

                        }

                    };



                    xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/updateCalendarDrop.php?k=" + start + "&g=" + end + "&f=" + id, true);

                    xmlhttp.send();

                    calendar1.fullCalendar('refetchEvents');

                    alert("Event Updated");

                },









               eventClick:function(event)

                {

                    var dialog,form,

                        dialog = $("#dialog-form1").dialog({



                            autoOpen: false,

                            height: 800,

                            width: 600,

                            modal: true,


                           


                            open: function () {
								
								
                                var startdate = $.fullCalendar.formatDate(event.start, "Y-MM-DD");

                                var enddate = $.fullCalendar.formatDate(event.end, "Y-MM-DD");

                                var starttime = $.fullCalendar.formatDate(event.start, "HH:mm:ss");

                                var endtime = $.fullCalendar.formatDate(event.end, "HH:mm:ss");

                                var id= event.ID;

                                document.getElementById('startdate').value = startdate;

                                document.getElementById('enddate').value = enddate;

                                document.getElementById('starttime').value = starttime;

                                document.getElementById('endtime').value = endtime;

                                document.getElementById('title').value = event.title;

                                document.getElementById('zimmer').value = event.zimmer;

                                

                                document.getElementById('kursid').value = event.kursid;

                                document.getElementById('klasse').value = event.klasse;

                                document.getElementById('lehrperson').value = event.lehrperson;

                                document.getElementById('farbe').value = event.color;
								
								document.getElementById('gewicht').value = event.gewichtung;
								
								
								 if (window.XMLHttpRequest) {

                        // code for IE7+, Firefox, Chrome, Opera, Safari

                        xmlhttp = new XMLHttpRequest();

                    } else {

                        // code for IE6, IE5

                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                    }

                    xmlhttp.onreadystatechange = function () {

                        if (this.readyState == 4 && this.status == 200) {

                            document.getElementById("dialog-form1").innerHTML = this.responseText;

                        }

                    };



                    xmlhttp.open("GET", "/Ajax_Scripts/showschuelernoten.php?f=" + event.klasse +  "&e=" + event.gewichtung + "&g=" + event.kursid +"&h=" + startdate +"&i=" + event.title  + "&j=" + starttime+  "&k=" + enddate + "&l=" + endtime + "&m=" + event.zimmer + "&n=" + event.kursname+  "&o=" + event.lehrperson+ "&p=" + event.color, true);

                    xmlhttp.send();

                            },



                            buttons: {

                                "Speichern": function(){



                                    title = $("#title");

                                    startCustdate = $("#startdate");

                                    endCustdate = $("#enddate");

                                    startCusttime = $("#starttime");

                                    endCusttime = $("#endtime");

                                    allFields = $([]).add(title).add(startCustdate).add(endCustdate).add(startCusttime).add(endCusttime);





                                    var valid = true;

                                    allFields.removeClass("ui-state-error");



                                    $("#users tbody").append("<tr>" +

                                        "<td>" + title.val() + "</td>" +

                                        "<td>" + startCustdate.val() + "</td>" +

                                        "<td>" + endCustdate.val() + "</td>" +

                                        "<td>" + startCusttime.val() + "</td>" +

                                        "<td>" + endCusttime.val() + "</td>" +

                                        "</tr>");





                                    if (window.XMLHttpRequest) {

                                        // code for IE7+, Firefox, Chrome, Opera, Safari

                                        xmlhttp = new XMLHttpRequest();

                                    } else {

                                        // code for IE6, IE5

                                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                                    }

                                    xmlhttp.onreadystatechange = function () {

                                        if (this.readyState == 4 && this.status == 200) {

                                            document.getElementById("respond").innerHTML = this.responseText;

                                        }

                                    };





                                    xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/updateCalendar.php?q=" + title.val() + "&k=" + startCustdate.val() + "T" + startCusttime.val() + "&g=" + endCustdate.val() + "T" + endCusttime.val()+"&f=" + event.id + "&klasse=" + document.getElementById('klasse').value + "&kursid=" + document.getElementById('kursid').value + "&kursname=" + document.getElementById('kursname').value + "&farbe=" + document.getElementById('farbe').value + "&zimmer=" + document.getElementById('zimmer').value+ "&lehrperson=" + document.getElementById('lehrperson').value, true);

                                    xmlhttp.send();



                                    dialog.dialog("close");







                                    calendar1.fullCalendar('refetchEvents');

                                },

                                "Löschen":function(){

                                    if(confirm("Are you sure you want to remove it?")) {

                                        var id = event.id;

                                        if (window.XMLHttpRequest) {

                                            // code for IE7+, Firefox, Chrome, Opera, Safari

                                            xmlhttp = new XMLHttpRequest();

                                        } else {

                                            // code for IE6, IE5

                                            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

                                        }

                                        xmlhttp.onreadystatechange = function () {

                                            if (this.readyState == 4 && this.status == 200) {

                                                document.getElementById("respond").innerHTML = this.responseText;

                                            }

                                        };



                                        xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/deleteCalendar.php?f=" + id, true);

                                        xmlhttp.send();

                                        calendar.fullCalendar('refetchEvents');

                                        alert("Event Removed");

                                    }

                                },

                                Cancel: function () {

                                    dialog.dialog("close");

                                },





                            },

                            close: function () {

                                calendar1.fullCalendar('refetchEvents');

                            }

                        });

                    form = dialog.find("form").on("submit", function (event) {

                        event.preventDefault();

                    });

                    dialog.dialog("open");

                },

            });

        });

    </script>









    

    <style>



        body {

            margin: 40px 10px;

            padding: 0;

            font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;

            font-size: 14px;

        }



        #calendar1 {

            max-width: 600px;
            max-height: 500px;
            margin: 0 auto;

        }



    </style>





    <script>





        function addUser() {



            title = $("#title"),

                startCustdate = $("#startdate"),

                endCustdate = $("#enddate"),

                startCusttime = $("#starttime"),

                endCusttime = $("#endtime"),

                allFields = $([]).add(title).add(startCustdate).add(endCustdate).add(startCusttime).add(endCusttime);





            var valid = true;

            allFields.removeClass("ui-state-error");



            $("#users tbody").append("<tr>" +

                "<td>" + title.val() + "</td>" +

                "<td>" + startCustdate.val() + "</td>" +

                "<td>" + endCustdate.val() + "</td>" +

                "<td>" + startCusttime.val() + "</td>" +

                "<td>" + endCusttime.val() + "</td>" +

                "</tr>");





            if (window.XMLHttpRequest) {

                // code for IE7+, Firefox, Chrome, Opera, Safari

                xmlhttp = new XMLHttpRequest();

            } else {

                // code for IE6, IE5

                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

            }

            xmlhttp.onreadystatechange = function () {

                if (this.readyState == 4 && this.status == 200) {

                    document.getElementById("respond").innerHTML = this.responseText;

                }

            };





            xmlhttp.open("GET", "/wp-content/themes/structr/Page_Scripts/insertCalendar.php?q=" + title.val() + "&k=" + startCustdate.val() + "T" + startCusttime.val() + "&g=" + endCustdate.val() + "T" + endCusttime.val()+ "&klasse=" + document.getElementById('klasse').value + "&kursid=" + document.getElementById('kursid').value  + "&farbe=" + document.getElementById('farbe').value + "&zimmer=" + document.getElementById('zimmer').value+ "&lehrperson=" + document.getElementById('lehrperson').value, true);

            xmlhttp.send();



            dialog.dialog("close");





            alert("Added Successfully");

        }

        $( function() {

            var dialog, form,



                // From http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#e-mail-state-%28type=email%29



                tips = $( ".validateTips" );





            function addUser() {







                dialog.dialog( "close" );





            }



            dialog = $( "#dialog-form1" ).dialog({

                autoOpen: false,

                height: 900,

                width: 300,

                modal: true,

                buttons: {



                   

                },



            });









        } );



    </script>



    <script>

        $(function(){



            $('input[type=datetime-local]').datepicker({

                    dateFormat : 'YYYY-MM-DD HH:mm:ss'

                }

            );



        });

    </script>
	
	 <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {}

        /* The Modal (background) */
        .modal{
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 40%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }

        /* Modal Content */
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }

        /* The Close Button */
        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
        button {
          color: white;
        }


	
	table.timecard {
	margin: auto;
	width: 100%;
	border-collapse: collapse;
	border: 1px solid #fff; /*for older IE*/
	border-style: hidden;
}

table.timecard caption {
	background-color: #3356FB;
	color: #fff;
	font-size: large;
	font-weight: normal;
	letter-spacing: .3em;
}

table.timecard thead th {
	padding: 8px;
	background-color: #8DCBFF;
	font-size: large;
}

table.timecard thead th#thDay {
	width: 40%;	
}

table.timecard thead th#thRegular, table.timecard thead th#thOvertime, table.timecard thead th#thTotal {
	width: 20%;
}

table.timecard th, table.timecard td {
	padding: 3px;
	border-width: 1px;
	border-style: solid;
	border-color: #3356FB #ccc;
}

table.timecard td {
	text-align: right;
}

table.timecard tbody th {
	text-align: left;
	font-weight: normal;
}

table.timecard tfoot {
	font-weight: bold;
	font-size: large;
	background-color: #687886;
	color: #fff;
}

table.timecard tr.even {
	background-color: #fde9d9;
}

input[type=text], select {
  width: 100%;
 padding: 0px 0px;
  margin: 0px 0;
  display: inline-block;
  border: 1px solid #FFFFFF;
  border-radius: 4px;
}



    </style>

</head>






<?php



include 'db.php';



$today=date("Y-m-d");

//$delOlder= "Delete  From sv_KurseAll Where Datum < '$today' ";

//mysqli_query($con,$delOlder);



?>

<input name="myBtn1" id="myBtn1" type="hidden" value="Mail versenden"  />

<div id="myModal1" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
       Wenn Sie sich Ihre Termine für den Outlook Kalender zusenden lassen möchten, geben Sie hier Ihre Mailadresse an. Klicken Sie dann "Mail versenden" und es wird eine Mail an die eingegebene Adresse gesendet. Es wird dann eine Datei im Anhang der Mail sein, mit der alle Ihre Termine durch Öffnen der Datei automatisch in den Outlook Kalender eingetragen werden.
<br>
<br>Bitte die Mailadresse eingeben:   <input name="Mail" type="email" id="Mail" />    <input name="Button1" type="button" value="Mail versenden" onclick="Mail()" />

<br><br><br>
<div id='status'></div>

        <span class="close" id="span1">&times;</span>


       
    </div>

</div>



<div id='calendar1'></div>

<div id='respond'></div>

<div id='lernende'></div>

</body>

</html>

<style>

    body {

        font-family:"Dosis", "Helvetica Neue", sans-serif;

        color:#232323;

    }



    #calendar {
        max-width: 600px;
        max-height: 500px;  
        margin: 0 auto;

    }



</style>

<script>
											 
											    // Get the modal
       

		document.getElementById("myBtn"+1).onclick = function() {
			document.getElementById("myModal"+1).style.display = "block"; 
		}
   // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == document.getElementById("myModal"+1)) {
         document.getElementById("myModal"+1).style.display = "none";
        }
    }
	
	 //When the user clicks on <span> (x), close the modal
     document.getElementById("span"+1).onclick = function() {
       document.getElementById("myModal"+1).style.display = "none";
    }
		  
    function Mail(){


            document.getElementById("status").innerHTML = "start sending...";



        if (window.XMLHttpRequest) {

            // code for IE7+, Firefox, Chrome, Opera, Safari

            xmlhttp = new XMLHttpRequest();

        } else {

            // code for IE6, IE5

            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

        }

        xmlhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {

                 document.getElementById("status").innerHTML = this.responseText;

            }

        };

        xmlhttp.open("GET","/wp-content/themes/structr/Page_Scripts/GetPruefterminValuesMail.php?q="+ document.getElementById('curruser').value +  "&m="+ document.getElementById('Mail').value,true);

        xmlhttp.send();


    }

function myFunction3(str) {
	  
  if (str.value.indexOf(",")>0)
    {
	 x = str.value;
  	 y = x.replace(",", ".");				  
     alert( 'Bitte "." statt "," verwenden!');
	 str.value=y;				  															 
	}
}

	if (window.innerWidth<800) var wdth=350;
	else var wdth=500;
	
function pruefungerfassen() {





			var dialog, form,



				// From http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#e-mail-state-%28type=email%29

				tips = $( ".validateTips" );









			dialog = $( "#dialog-form" ).dialog( {



				autoOpen: false,

				height: 800,
               
				width: wdth,

				modal: true,
                 
				top:0,
				left:0,




				open: function () {

					document.getElementById( 'startdate1' ).value = "";

					document.getElementById( 'enddate1' ).value = "";

					document.getElementById( 'starttime1' ).value = "";
					1
					document.getElementById( 'endtime1' ).value = "";

					document.getElementById( 'title1' ).value = "";

					document.getElementById( 'zimmer1' ).value = "";

					document.getElementById( 'lernziele1' ).value = "";

					document.getElementById( 'kursid1' ).value = "";



					document.getElementById( 'lehrperson1' ).value = <?php echo $Name; ?>;
					document.getElementById( 'gewicht1' ).value = "";

					document.getElementById( 'farbe' ).value = "";

				},



				buttons: {

					"Speichern": function () {

						if ( document.getElementById( 'startdate1' ).value == "" || document.getElementById( 'enddate1' ).value == "" || document.getElementById( 'starttime1' ).value == "" || document.getElementById( 'endtime1' ).value == "" ) {
							alert( 'bitte Startzeitpunkt und Endzeitpunkt eingeben!!' );
						} else {



							title = $( "#title1" ),

								startCustdate = $( "#startdate1" ),

								endCustdate = $( "#enddate1" ),

								startCusttime = $( "#starttime1" ),

								endCusttime = $( "#endtime1" ),

								allFields = $( [] ).add( title ).add( startCustdate ).add( endCustdate ).add( startCusttime ).add( endCusttime );





							var valid = true;

							allFields.removeClass( "ui-state-error" );



							$( "#users tbody" ).append( "<tr>" +

								"<td>" + title.val() + "</td>" +

								"<td>" + startCustdate.val() + "</td>" +

								"<td>" + endCustdate.val() + "</td>" +

								"<td>" + startCusttime.val() + "</td>" +

								"<td>" + endCusttime.val() + "</td>" +

								"</tr>" );





							if ( window.XMLHttpRequest ) {

								// code for IE7+, Firefox, Chrome, Opera, Safari

								xmlhttp = new XMLHttpRequest();

							} else {

								// code for IE6, IE5

								xmlhttp = new ActiveXObject( "Microsoft.XMLHTTP" );

							}

							xmlhttp.onreadystatechange = function () {

								if ( this.readyState == 4 && this.status == 200 ) {

									document.getElementById( "respond" ).innerHTML = this.responseText;

								}

							};



							var text = tinyMCE.activeEditor.getContent();
							text = text.replace( /\r/g, '!^' );
							text = text.replace( /\n/g, '~!' );
							text = text.replace( /&/g, '§§§' );
							text = text.replace( /\+/g, '!!!!!' );

							text = text.replace( /#/g, '|||||' );

							xmlhttp.open( "GET", "/wp-content/themes/structr/Page_Scripts/insertPrueftermin.php?q=" + title.val() + "&k=" + startCustdate.val() + "T" + startCusttime.val() + "&g=" + endCustdate.val() + "T" + endCusttime.val() + "&kursid=" + document.getElementById( 'kursid1' ).value + "&color=" + document.getElementById( 'farbe' ).value.substring( 1, 7 ) + "&zimmer=" + document.getElementById( 'zimmer1' ).value + "&l=" + document.getElementById( 'lehrperson1' ).value + "&gewichtung=" + document.getElementById( 'gewicht1' ).value + "&lernziele=" + text, true );

							xmlhttp.send();

                           alert( "Prüfungsdaten gespeichert" );

							dialog.dialog( "close" );




                              


						
							return;
							
							

						}

						
					},



					Cancel: function () {

						dialog.dialog( "close" );

						//	 calendar.fullCalendar('refetchEvents');

						return;
						
						

					},





				},

				close: function () {


					// calendar.fullCalendar('refetchEvents');
					 
                   
					return;

				}

			} );


         



			dialog.dialog( "open" );

	
		};

	


</script>
<br><br><input name="pruefungerf" id="pruefungserf" type="button" value="Prüfung erfassen" onClick="pruefungerfassen()"/><br>Bitte hier klicken um eine neue Prüfung zu erstellen. <br>

<div id="dialog-form" class="modal"  title="Prüfungsdaten">



		<table class="timecard" border="0">
			<caption>
				Prüfungsdaten
			</caption>
			<tbody>
				<tr>
					<td style="width: 150px; font-size: 12px; font-weight: bold;">Prüfungsname:</td>
					<td colspan="2"><input type="text" name="title" id="title1" value="<?php echo $_GET['i'];?>" width="400px">
					</td>
				</tr>
				<tr>
					<td style="width: 150px; font-size: 12px; font-weight: bold;">Kurs:</td>
					<td colspan="2"><select type="text" name="kursid" id="kursid1" value="<?php echo $_GET['g'];?>" onChange="getcolor(this.value)" class="text ui-widget-content ui-corner-all">
	
						
	<?
	
	$isEntrylp = "Select Kurs1, Kurs2, Kurs3, Kurs4, Kurs5, Kurs6, Kurs7, Kurs8, Kurs9,Kurs10,Kurs11,Kurs12,Kurs13,Kurs14,Kurs15,Kurs16,Kurs17, Kurs18, Kurs19, Kurs20, Kurs21, Kurs22, Kurs23, Kurs24, Kurs25,Kurs26,Kurs27,Kurs28,Kurs29,Kurs30 From sv_Lehrpersonen Where ID = '$IDLP'";
	$resultlp = mysqli_query( $con, $isEntrylp );


	echo "<option>" . '-Select-' . "</option>";

	while ( $linelp = mysqli_fetch_array( $resultlp ) ) {
		for ( $x = 1; $x <= 30; $x++ ) {

			$valuelp = $linelp[ 'Kurs' . $x ];
			if ( $valuelp <> "" )echo "<option>" . $valuelp . "</option>";

		}
	}


	?>
		  </select>
					</td>
				</tr>
				<tr>
					<td style="width: 150px; font-size: 12px; font-weight: bold;">Startdatum und Zeit:</td>

					<td><input type="date" name="startdate" id="startdate1" value="<?php echo $_GET['h'];?>" class="text ui-widget-content ui-corner-all">
					</td>
					</td>
					<td><input type="time" name="starttime" id="starttime1" value="<?php echo $_GET['j'];?>" class="text ui-widget-content ui-corner-all">
					</td>
				</tr>
				<tr>
					<td style="width: 150px; font-size: 12px; font-weight: bold;">Enddatum und Zeit:</td>
					<td><input type="date" name="enddate" id="enddate1" value="<?php echo $_GET['k'];?>" class="text ui-widget-content ui-corner-all">
					</td>
					<td><input type="time" name="endtime" id="endtime1" value="<?php echo $_GET['l'];?>" class="text ui-widget-content ui-corner-all">
					</td>
				</tr>
				<tr>
					<td style="width: 150px; font-size: 12px; font-weight: bold;">Gewichtung:</td>
					<td><input type="text" name="gewicht" id="gewicht1" value="<?php echo $_GET['e'];?>" class="text ui-widget-content ui-corner-all">
					</td>
					<td style="padding-left: 5px;padding-bottom:3px; font-size: 10px;">Wert 1 entspricht einfacher Gewichtung</td>
				</tr>

			</tbody>
		</table>

		<table class="timecard" border="0">
			<caption>
				Ort und Aufsicht
			</caption>
			<tbody>
				<tr>
					<td style="width: 150px; font-size: 12px; font-weight: bold;">Zimmer:</td>
					<td> <input type="text" name="zimmer" id="zimmer1" value="<?php echo $_GET['m'];?>" class="text ui-widget-content ui-corner-all">
					</td>
				</tr>
				<tr>
					<td style="width: 150px; font-size: 12px; font-weight: bold;">Lehrperson:</td>
					<td><input type="text" name="lehrperson" id="lehrperson1" class="text ui-widget-content ui-corner-all" readonly value="<?php echo $Name; ?>">






			</tbody>
		</table>

		<table class="timecard" border="0">
			<caption>
				Lernziele
			</caption>
			<tbody>
				<tr>
					<td><textarea id="lernziele2"></textarea>
					</td>

				</tr>


			</tbody>
		</table>


		<label for="farbe">Farbe:</label>

		<br>
		<div id="farbediv"></div>

		</fieldset>


		</form>

	</div>


</div>

<br><br>
	 <div id="Notenbuch" class="left">
										  <?




								include 'db.php';
								$Kursnme=base64_decode($_GET['q']);


								$select='Select Nachname, Note1, Note2,Note3, Note4, Note5, Note6, Note7, Note8, Note9 From sv_LernenderKurs Where KursID="';
								 $sel1=$Kursnme;

								$sel2= '" ';
								 $isEntryUpd1 = "UPDATE sv_postmeta SET meta_value  = '$select$sel1$sel2' where post_id='18106' and meta_key='visualizer-db-query' ";
									mysqli_query( $con1, $isEntryUpd1 );	




								$select='Select Nachname, Abwesenheiten From sv_LernenderKurs Where KursID="';
								 $sel1=$Kursnme;

								$sel2= '" ';
								 $isEntryUpd2 = "UPDATE sv_postmeta SET meta_value  = '$select$sel1$sel2' where post_id='18110' and meta_key='visualizer-db-query' ";
									mysqli_query( $con1, $isEntryUpd2 );	

								?>
								<script>








									var table10;
									var table11;
									var tableedit10;
									var editor10;
									var table12;
									var table13;
									$(document).ready(function() {
								 var urlParams = new URLSearchParams(window.location.search);

								tableshow();    

									});

									 function loadtables(url3,url4){
									$.fn.dataTable.ext.errMode = 'throw';
									table10 = $( '.datatables10' ).DataTable( {


										ajax: {

											url: url3,

											dataSrc: ""
										},
										columns: [ {
											className: 'details-control',
											defaultContent: '',
											data: null,
											orderable: false
										},


											{
												data: 'IDSchueler'
											},
											{
												data: 'Nachname'
											},
											{
												data: 'Vorname'
											},
											{
												data: 'Notenschnitt'
											},
											{
												className: 'details-control1',
												defaultContent: '',
												data: null,
												orderable: false,
												title:' Noten Bearbeiten'


											},

											{
												className: 'details-control2',
												defaultContent: '',
												data: null,
												orderable: false,
												title:'Neue Note erstellen'
											},
										], "language": {
											"decimal": ",",
											"thousands": ".",
											"info": "Anzeige _START_ bis _END_ von _TOTAL_ Einträgen",
											"infoEmpty": "Keine Einträge",
											"infoPostFix": "",
											"infoFiltered": "(gefiltert aus insgesamt _MAX_ Einträgen)",
											"loadingRecords": "keine Daten vorhanden...",
											"lengthMenu": "Anzeigen von _MENU_ Einträgen",
											"paginate": {
												"first": "Erste",
												"last": "Letzte",
												"next": "Nächste",
												"previous": "Zurück"
											},
											"processing": "Verarbeitung läuft ...",
											"search": "Suche:",
											"searchPlaceholder": "Suchbegriff",
											"zeroRecords": "Keine Daten! Bitte ändern Sie Ihren Suchbegriff.",
											"emptyTable": "Keine Daten vorhanden",
											"aria": {
												"sortAscending":  ": aktivieren, um Spalte aufsteigend zu sortieren",
												"sortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
											},
											//only works for built-in buttons, not for custom buttons
											"buttons": {
												"create": "Neu",
												"edit": "Ändern",
												"remove": "Löschen",
												"copy": "Kopieren",
												"csv": "CSV-Datei",
												"excel": "Excel-Tabelle",
												"pdf": "PDF-Dokument",
												"print": "Drucken",
												"colvis": "Spalten Auswahl",
												"collection": "Auswahl",
												"upload": "Datei auswählen...."
											},
											"select": {
												"rows": {
													_: '%d Zeilen ausgewählt',
													0: 'Zeile anklicken um auszuwählen',
													1: 'Eine Zeile ausgewählt'
												}
											}
										}            

									} );
									table11 = $( '.datatables11' ).DataTable( {

										 responsive: {
											details: {

												display: $.fn.dataTable.Responsive.display.modal( {
													header: function ( row ) {
														var data = row.data();
														return 'Notenschnitt des Schülers';
													}
												} ),
												renderer: function ( api, rowIdx, columns ) {
													var data = $.map( columns, function ( col, i ) {
														if (col.data != ''){
														return '<tr>'+
																'<td>'+col.title+':'+'</td> '+
																'<td>'+col.data+'</td>'+
															'</tr>';
													}
													} ).join('');

													return $('<table/>').append( data );
												}
											}
										},

										ajax: {

											url: url4,

											dataSrc: ""
										},

										columns: [ {
											className: 'details-control',
											defaultContent: '',
											data: null,
											orderable: false,

										},

											{
												data: 'SchuelerID'
											},
											{
												data: 'Nachname'
											},
											{
												data: 'Vorname'
											},
											{
												data: 'AbwesenheitenGesamt'
											}


										], "language": {
											"decimal": ",",
											"thousands": ".",
											"info": "Anzeige _START_ bis _END_ von _TOTAL_ Einträgen",
											"infoEmpty": "Keine Einträge",
											"infoPostFix": "",
											"infoFiltered": "(gefiltert aus insgesamt _MAX_ Einträgen)",
											"loadingRecords": "keine Daten vorhanden...",
											"lengthMenu": "Anzeigen von _MENU_ Einträgen",
											"paginate": {
												"first": "Erste",
												"last": "Letzte",
												"next": "Nächste",
												"previous": "Zurück"
											},
											"processing": "Verarbeitung läuft ...",
											"search": "Suche:",
											"searchPlaceholder": "Suchbegriff",
											"zeroRecords": "Keine Daten! Bitte ändern Sie Ihren Suchbegriff.",
											"emptyTable": "Keine Daten vorhanden",
											"aria": {
												"sortAscending":  ": aktivieren, um Spalte aufsteigend zu sortieren",
												"sortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
											},
											//only works for built-in buttons, not for custom buttons
											"buttons": {
												"create": "Neu",
												"edit": "Ändern",
												"remove": "Löschen",
												"copy": "Kopieren",
												"csv": "CSV-Datei",
												"excel": "Excel-Tabelle",
												"pdf": "PDF-Dokument",
												"print": "Drucken",
												"colvis": "Spalten Auswahl",
												"collection": "Auswahl",
												"upload": "Datei auswählen...."
											},
											"select": {
												"rows": {
													_: '%d Zeilen ausgewählt',
													0: 'Zeile anklicken um auszuwählen',
													1: 'Eine Zeile ausgewählt'
												}
											}
										}            


									} );

									$( '.datatables10 tbody' ).on( 'click', 'td.details-control', function () {
										var tr = $( this ).closest( 'tr' ),
											row = table10.row( tr );

										if ( row.child.isShown() ) {
											tr.next( 'tr' ).removeClass( 'details-row' );
											row.child.hide();
											tr.removeClass( 'shown' );
										} else {
											row.child( format( row.data() ) ).show();
											tr.next( 'tr' ).addClass( 'details-row' );
											tr.addClass( 'shown' );
										}
									} );

									$( '.datatables10 tbody' ).on( 'click', 'td.details-control1', function () {
										var tr = $( this ).closest( 'tr' ),
											row = table10.row( tr );



										row.child( showNoten( row.data() ) ).show();
										tr.next( 'tr' ).addClass( 'details-row' );
										tr.addClass( 'shown' );


									} );

									$( '.datatables10 tbody' ).on( 'click', 'td.details-control2', function () {
										var tr = $( this ).closest( 'tr' ),
											row = table10.row( tr );



										row.child( neueNote( row.data() ) ).show();
										tr.next( 'tr' ).addClass( 'details-row' );
										tr.addClass( 'shown' );

									} );


									$( '.datatables11 tbody' ).on( 'click', 'td.details-control', function () {
										var tr = $( this ).closest( 'tr' ),
											row = table11.row( tr );

										if ( row.child.isShown() ) {
											tr.next( 'tr' ).removeClass( 'details-row' );
											row.child.hide();
											tr.removeClass( 'shown' );
										} else {
											row.child( format1( row.data() ) ).show();
											tr.next( 'tr' ).addClass( 'details-row' );
											tr.addClass( 'shown' );
										}
									} );

									}

									function loadtablesUneditable(){
										$.fn.dataTable.ext.errMode = 'throw';
										table10 = $( '.datatables10' ).DataTable( {


											 responsive: {
											details: {
												display: $.fn.dataTable.Responsive.display.modal( {
													header: function ( row ) {
														var data = row.data();
														return 'Abwesenheiten des Schülers';
													}
												} ),
												renderer: function ( api, rowIdx, columns ) {
													var data = $.map( columns, function ( col, i ) {
														if (col.data != ''){
														return '<tr>'+
																'<td>'+col.title+':'+'</td> '+
																'<td>'+col.data+'</td>'+
															'</tr>';
													}
													} ).join('');

													return $('<table/>').append( data );
												}
											}
										},

											ajax: {

												url: new_url,

												dataSrc: ""
											},
											columns: [ {
												className: 'details-control',
												defaultContent: '',
												data: null,
												orderable: false
											},


												{
													data: 'IDSchueler'
												},
												{
													data: 'Nachname'
												},
												{
													data: 'Vorname'
												},
												{
													data: 'Notenschnitt'
												},
												{
													 data: 'empty'
												},
												{
													data: 'empty'
												}


											], "language": {
											"decimal": ",",
											"thousands": ".",
											"info": "Anzeige _START_ bis _END_ von _TOTAL_ Einträgen",
											"infoEmpty": "Keine Einträge",
											"infoPostFix": "",
											"infoFiltered": "(gefiltert aus insgesamt _MAX_ Einträgen)",
											"loadingRecords": "keine Daten vorhanden...",
											"lengthMenu": "Anzeigen von _MENU_ Einträgen",
											"paginate": {
												"first": "Erste",
												"last": "Letzte",
												"next": "Nächste",
												"previous": "Zurück"
											},
											"processing": "Verarbeitung läuft ...",
											"search": "Suche:",
											"searchPlaceholder": "Suchbegriff",
											"zeroRecords": "Keine Daten! Bitte ändern Sie Ihren Suchbegriff.",
											"emptyTable": "Keine Daten vorhanden",
											"aria": {
												"sortAscending":  ": aktivieren, um Spalte aufsteigend zu sortieren",
												"sortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
											},
											//only works for built-in buttons, not for custom buttons
											"buttons": {
												"create": "Neu",
												"edit": "Ändern",
												"remove": "Löschen",
												"copy": "Kopieren",
												"csv": "CSV-Datei",
												"excel": "Excel-Tabelle",
												"pdf": "PDF-Dokument",
												"print": "Drucken",
												"colvis": "Spalten Auswahl",
												"collection": "Auswahl",
												"upload": "Datei auswählen...."
											},
											"select": {
												"rows": {
													_: '%d Zeilen ausgewählt',
													0: 'Zeile anklicken um auszuwählen',
													1: 'Eine Zeile ausgewählt'
												}
											}
										}            

										} );
										table11 = $( '.datatables11' ).DataTable( {


											ajax: {

												url: new_url1,

												dataSrc: ""
											},

											columns: [ {
												className: 'details-control',
												defaultContent: '',
												data: null,
												orderable: false,

											},

												{
													data: 'SchuelerID'
												},
												{
													data: 'Nachname'
												},
												{
													data: 'Vorname'
												},
												{
													data: 'AbwesenheitenGesamt'
												}


											], "language": {
											"decimal": ",",
											"thousands": ".",
											"info": "Anzeige _START_ bis _END_ von _TOTAL_ Einträgen",
											"infoEmpty": "Keine Einträge",
											"infoPostFix": "",
											"infoFiltered": "(gefiltert aus insgesamt _MAX_ Einträgen)",
											"loadingRecords": "keine Daten vorhanden...",
											"lengthMenu": "Anzeigen von _MENU_ Einträgen",
											"paginate": {
												"first": "Erste",
												"last": "Letzte",
												"next": "Nächste",
												"previous": "Zurück"
											},
											"processing": "Verarbeitung läuft ...",
											"search": "Suche:",
											"searchPlaceholder": "Suchbegriff",
											"zeroRecords": "Keine Daten! Bitte ändern Sie Ihren Suchbegriff.",
											"emptyTable": "Keine Daten vorhanden",
											"aria": {
												"sortAscending":  ": aktivieren, um Spalte aufsteigend zu sortieren",
												"sortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
											},
											//only works for built-in buttons, not for custom buttons
											"buttons": {
												"create": "Neu",
												"edit": "Ändern",
												"remove": "Löschen",
												"copy": "Kopieren",
												"csv": "CSV-Datei",
												"excel": "Excel-Tabelle",
												"pdf": "PDF-Dokument",
												"print": "Drucken",
												"colvis": "Spalten Auswahl",
												"collection": "Auswahl",
												"upload": "Datei auswählen...."
											},
											"select": {
												"rows": {
													_: '%d Zeilen ausgewählt',
													0: 'Zeile anklicken um auszuwählen',
													1: 'Eine Zeile ausgewählt'
												}
											}
										}            


										} );

										$( '.datatables10 tbody' ).on( 'click', 'td.details-control', function () {
											var tr = $( this ).closest( 'tr' ),
												row = table10.row( tr );

											if ( row.child.isShown() ) {
												tr.next( 'tr' ).removeClass( 'details-row' );
												row.child.hide();
												tr.removeClass( 'shown' );
											} else {
												row.child( format( row.data() ) ).show();
												tr.next( 'tr' ).addClass( 'details-row' );
												tr.addClass( 'shown' );
											}
										} );




										$( '.datatables11 tbody' ).on( 'click', 'td.details-control', function () {
											var tr = $( this ).closest( 'tr' ),
												row = table11.row( tr );

											if ( row.child.isShown() ) {
												tr.next( 'tr' ).removeClass( 'details-row' );
												row.child.hide();
												tr.removeClass( 'shown' );
											} else {
												row.child( format1( row.data() ) ).show();
												tr.next( 'tr' ).addClass( 'details-row' );
												tr.addClass( 'shown' );
											}
										} );


									}






									//var data= [{"Note":"6","Name":"dsgs","Gewichtung":"0","Datum":"2019-06-16"},{"Note":"2","Name":"dsgs","Gewichtung":"0","Datum":"2019-06-16"},{"Note":"3.7","Name":"dsgs","Gewichtung":"25","Datum":"2019-06-16"}]  ;

										$( '#divTable' ).hide();

										function format( data ) {
											
											
											var i;
											var note = null;

											for ( i = 1; i < 10; i++ ) {
												var Notedt = data[ "Note" + i ];
												var Namedt = data[ "Name" + i ];
												var Gewichtungdt = data[ "Gewichtung" + i ];
												var Datumdt = data[ "Datum" + i ];

												if ( ( Notedt ) >= 1 && Notedt <= 100 ) {
													
													var z = null;
													var z = '<div id="noteplus" class="details-container"><table cellpadding="5" cellspacing="0" border="0" class="details-table">'

													+'<tr>' +
													'<td  class="title" width="10%" >Note' + i + ':</td>' +
														'<td  width="12%">' + Notedt + '</td>' +
														'<td class="title"  width="10%" >Notenname:</td>' +
														'<td  width="12%">' + Namedt + '</td>' +
														'<td class="title"  width="10%" >Gewichtung:</td>' +
														'<td  width="12%">' + Gewichtungdt + '</td>' +
														'<td class="title"  width="10%" >Datum:</td>' +
														'<td  width="12%">' + Datumdt + '</td></tr>' +


														'</table>' +


														'</div>';
													if ( note == null ) {
														note = z;
													} else note = note + z;
												}

											}




											return note;
										};


										function showNoten( data ) {


										if ( tableedit10 ) {
										tableedit10.destroy();
									}

									if ( editor10 ) {
										editor10.destroy();
									}

									loadtable(data[ "IDSchueler" ]);
									loadeditor(data[ "IDSchueler" ]);

									   tableedit10.clear()
										.draw();


									var str = data[ "IDSchueler" ];


									editor10 . field( 'SchuelerID' ) . def( str );
									editor10 . field( 'KursID' ) . def( document . getElementById( "Kursname" ) . value );
									editor10 . submit();



									 document.getElementById("Schuelerlb").value=data['Vorname'] +' '+data['Nachname'];
												document.getElementById("Kurslb").value = document.getElementById("Kursname").value; 



												document.getElementById("myModal").style.display = "block"; 

								   // When the user clicks anywhere outside of the modal, close it
									window.onclick = function(event) {
										if (event.target == document.getElementById("myModal")) {
										// document.getElementById("myModal").style.display = "none";
											 //document.getElementById("noteplus").innerHTML = "";

											                                         
reloadpage1();

										}
									}

									 //When the user clicks on <span> (x), close the modal
									 document.getElementById("span").onclick = function() {
									   document.getElementById("myModal").style.display = "none";
										                                         
reloadpage1();

									}



										}

								function neueNote( data ) {
									
											 document.getElementById("Schuelerlb1").value=data['Vorname'] +' '+data['Nachname'];
												document.getElementById("Kurslb1").value = document.getElementById("Kursname").value; 

											 document.getElementById("schid").value=data['IDSchueler'];
												document.getElementById("myModal2").style.display = "block"; 

								   // When the user clicks anywhere outside of the modal, close it
									window.onclick = function(event) {
										if (event.target == document.getElementById("myModal2")) {

								//			document.getElementById("myModal2").style.display = "none";
											 document.getElementById("Notecr").value = "";
									 document.getElementById("Namecr").value = "";
									 document.getElementById("Gewichtungcr").value = "";
									 document.getElementById("Datumcr").value = "";
                                         
reloadpage1();
												  }
									}

									 //When the user clicks on <span> (x), close the modal
									 document.getElementById("span2").onclick = function() {
									   document.getElementById("myModal2").style.display = "none";
										  document.getElementById("Notecr").value = "";
									 document.getElementById("Namecr").value = "";
									 document.getElementById("Gewichtungcr").value = "";
									 document.getElementById("Datumcr").value = "";
                                         
reloadpage1();
									}





										}




										function format1( data ) {
											var i;
											var abw = null;

											for ( i = 0; i < data.Rows; i++ ) {

												var Datumdt = data[ "Datum" + i ];
												var Klassedt = data[ "Klasse" + i ];
												var Kommentardt = data[ "Kommentar" + i ];
												var KommentVerdt = data[ "KommentVer" + i ];
												var Abwesenheitsdauerdt = data[ "Abwesenheitsdauer" + i ];
												var Lehrerdt = data[ "Lehrer" + i ];


												var z = null;
												var z = '<div id="abwplus" class="details-container"><table cellpadding="5" cellspacing="0" border="0" class="details-table">'

												+'<tr>' +
												'<td class="title"  width="7%">Klasse:</td>' +
												'<td  width="10%">' + Klassedt + '</td></tr>' +
													'<td class="title"  width="7%">Datum:</td>' +
													'<td width="10%">' + Datumdt + '</td></tr>' +
													'<td class="title"  width="7%">Kommentar:</td>' +
													'<td>' + Kommentardt + '</td></tr>' +
													'<td class="title"  width="7%">KmntVerw:</td>' +
													'<td>' + KommentVerdt + '</td></tr>' +
													'<td class="title"  width="7%">DauerAbw:</td>' +
													'<td  width="10%">' + Abwesenheitsdauerdt + '</td></tr>' +
													'<td class="title" width="7%">Lehrer:</td>' +
													'<td  width="10%">' + Lehrerdt + '</td></tr>' +

													'</table>' +


													'::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</div>';
												if ( abw == null ) {
													abw = z;
												} else abw = abw + z;
											}



											return abw;
										};


										var new_url = "/wp-content/themes/structr/Page_Scripts/GetNotenValues.php?q=" + document.getElementById( "Kursname" ).value + "&s=" + document.getElementById( "semDB" ).value;
										var new_url1 = "/wp-content/themes/structr/Page_Scripts/GetAbwValues.php?k=" + document.getElementById( "Kursname" ).value + "&s=" + document.getElementById( "semDB" ).value;










								</script>


								<style>
									#tooltip {
								  position: absolute;
								  z-index: 1001;
								  display: none;
								  border: 2px solid #ebebeb;
								  border-radius: 5px;
								  padding: 10px;
								  background-color: #fff;
								}

								div.DTE div.DTE_Body div.DTE_Field {
									padding: 0.7em 0 0 0;
								}
								div.DTE div.DTE_Body div.DTE_Field > label {
									float: none;
									clear: both;
									width: 100%;
								}
								div.DTE div.DTE_Body div.DTE_Field > div.DTE_Field_Input {
									float: none;
									clear: both;
									width: 100%;
								}

								div.DTE div.DTE_Header,
								div.DTE div.DTE_Footer {
									background-color: transparent;
									border-color: black
								}

								div.DTE div.DTE_Header {
									height: 60px;
								}

								p.start-editing,
								p.add-new {
									text-align: center;
									font-size: 1.4em;
									line-height: 1.4em;
								}


								p.start-editing {
									padding-top: 7em;
								}

								#container {
									display: flex;
									align-items: stretch;
								}

								#table-container {
									box-sizing: border-box;
									width: 55%;
									padding: 0 1em;
								}

								#form-container {
									box-sizing: border-box;
									width: 45%;
									padding: 0 1em;
								}



									.container {
										margin-top: 15px;
									}

									.container .details-row td {
										padding: 0;
										margin: 0;
									}

									.details-container {
										width: 100%;
										height: 100%;
										background-color: #FFF;
										padding-top: 5px;
									}

									.details-table {
										width: 100%;
										background-color: #FFF;
										margin: 5px;
									}

									.title {
										font-weight: bold;
									}

									.iconSettings,
									td.details-control:before,
									tr.shown td.details-control:before {
										margin-top: 5px;
										margin-bottom: 10px;
										font-size: 12px;
										position: relative;
										top: 1px;
										display: inline-block;
										font-family: 'Glyphicons Halflings';
										font-style: normal;
										font-weight: 400;
										line-height: 1;
										-webkit-font-smoothing: antialiased;
									}

									td.details-control {
										cursor: pointer;
										text-align: center;
									}

									td.details-control:before {
										content: '\2b';
									}

									tr.shown td.details-control:before {
										content: '\2212';
									}

									.iconSettings,
									td.details-control1:before,
									tr.shown td.details-control1:before {
										margin-top: 5px;
										margin-bottom: 10px;
										font-size: 12px;
										position: relative;
										top: 1px;
										display: inline-block;
										font-family: 'Glyphicons Halflings';
										font-style: normal;
										font-weight: 400;
										line-height: 1;
										-webkit-font-smoothing: antialiased;
									}

									td.details-control1 {

										cursor: pointer;
										text-align: center;
									}

									td.details-control1:before {
										content: '✎';
									}

									tr.shown td.details-control1:before {
										content: '✎';
									}



										.iconSettings,
									td.details-control2:before,
									tr.shown td.details-control2:before {
										margin-top: 5px;
										margin-bottom: 10px;
										font-size: 12px;
										position: relative;
										top: 1px;
										display: inline-block;
										font-family: 'Glyphicons Halflings';
										font-style: normal;
										font-weight: 400;
										line-height: 1;
										-webkit-font-smoothing: antialiased;
									}

									td.details-control2 {
										cursor: pointer;
										text-align: center;
									}

									td.details-control2:before {
										content: url(/plussmall.png);
									}

									tr.shown td.details-control2:before {
										content: url(/plussmall.png);
									}

								</style>

								<style>
										body {}

										.modal{
											display: none; /* Hidden by default */
											position: fixed; /* Stay in place */
											z-index: 1; /* Sit on top */
											padding-top: 100px; /* Location of the box */
											left: 0;
											top: 0;
											width: 100%; /* Full width */
											height: 100%; /* Full height */
											overflow: auto; /* Enable scroll if needed */
											background-color: rgb(0,0,0); /* Fallback color */
											background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
										}
										.modal1{
											display: none; /* Hidden by default */
											position: fixed; /* Stay in place */
											z-index: 1; /* Sit on top */
											padding-top: 100px; /* Location of the box */
											left: 0;
											top: 0;
											width: 100%; /* Full width */
											height: 100%; /* Full height */
											overflow: auto; /* Enable scroll if needed */
											background-color: rgb(0,0,0); /* Fallback color */
											background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
										}


										/* Modal Content */
										.modal-content {
										   width: 85%;
									padding: 25px;
									background: #FFF;
									max-width: 600px;
									margin: 70px auto;
									position: relative;
									border-radius: 8px;
									box-shadow: 0 0 6px rgba(0, 0, 0, 0.2);
										}

										.modal-content1 {
											 width: 85%;
									padding: 25px;
									background: #FFF;
									max-width: 600px;
									margin: 70px auto;
									position: relative;
									border-radius: 8px;
									box-shadow: 0 0 6px rgba(0, 0, 0, 0.2);
										}


										/* The Close Button */
										.close {
											color: #aaaaaa;
											float: right;
											font-size: 28px;
											font-weight: bold;
										}

										.close:hover,
										.close:focus {
											color: #000;
											text-decoration: none;
											cursor: pointer;
										}
										button {
										  color: white;
										}
									</style>
								<script>









								 $('#form-container').on( 'click', 'p.add-new', function (e) {
										e.preventDefault();

										editor10.create( {
												title: 'Create new row',
												buttons: [
													'Save',
													{
														label: 'Cancel',
														fn: function () {
															editor10.close();
														}
													}
												]
										} );
									} );
								

								function tableshowne() {

									if ( tableedit11 ) {
										tableedit11.destroy();
									}

									if ( editor10 ) {
										editor10.destroy();
									}
									loadeditor();


									loadtable();


									var str = document . getElementById( "Schueler" ) . value;
									var patt = /:(.*)/;
									var result = str . match( patt );

									editor10 . field( 'SchuelerID' ) . def( result[ 1 ] );
									editor10 . field( 'KursID' ) . def( document . getElementById( "Kursname" ) . value );
									editor10 . submit();




								}

								  function onPageDisplay ( elm ) {
									var name = 'onPage'+Math.random();
									var Editor10 = $.fn.dataTable.Editor;
									var emptyInfo;

									Editor10.display[name] = $.extend( true, {}, Editor10.models.display, {
										// Create the HTML mark-up needed the display controller
										init: function ( editor10 ) {
											emptyInfo = elm.html();
											return Editor10.display[name];
										},

										// Show the form
										open: function ( editor10, form, callback ) {
											elm.children().detach();
											elm.append( form );

											if ( callback ) {
												callback();
											}
										},

										// Hide the form
										close: function ( editor10, callback ) {
											elm.children().detach();
											elm.html( emptyInfo );

											if ( callback ) {
												callback();
											}
										}
									} );

									return name;
								}









									function checkKurs( str ) {

										if ( str == "-Select-" ) {

											alert( 'Bitte einen Kurs auswählen' )

											return;

										}

									}
								</script>

								<?php

								include 'db.php';

								global $current_user;

								get_currentuserinfo();



								/* echo 'Username: ' . $current_user-&gt;user_login . "\n";

								echo 'User email: ' . $current_user-&gt;user_email . "\n";

								echo 'User level: ' . $current_user-&gt;user_level . "\n";

								echo 'User first name: ' . $current_user-&gt;user_firstname . "\n";

								echo 'User last name: ' . $current_user-&gt;user_lastname . "\n";

								echo 'User display name: ' . $current_user-&gt;display_name . "\n";

								echo 'User ID: ' . $current_user-&gt;ID . "\n";



								*/

								$heute=date("Y-m-d");
								?>


								
								<h4>Mein Notenbuch</h4>

								

								<?php



								$isEntry= "Select ID From sv_Lehrpersonen where User_ID=$current_user->ID";

								$result = mysqli_query($con, $isEntry);



								while( $line2= mysqli_fetch_assoc($result))

								{

									$value=$line2['ID'];

									$isEntry= "Select Nachname, Vorname From sv_Lehrpersonen WHERE ID='$value'";

									$result = mysqli_query($con, $isEntry);

									while( $line3= mysqli_fetch_array($result))

									{

										$Name = $line3['Nachname'];

										$Vorname = $line3['Vorname'];



									}


								//	echo '<input  id="lehrer" name="lehrer" readonly="readonly" type="text" value="'.$Vorname .' '.$Name .' ID:'. $value .'" />' ;

									$Lehrer=$Vorname .' '.$Name .' ID:'. $value;

								}
								$UID=	$current_user->ID;
								 echo '<input  id="lehrerID" name="lehrer" readonly="readonly" type="hidden" value="'. $value .'" />' ;
								 echo '<input  id="UID" name="uid" readonly="readonly" type="hidden" value="'. $UID .'" />' ;
										  $isEntry = "Select * From sv_Settings ";
								$result = mysqli_query($con, $isEntry);

									while ($line1 = mysqli_fetch_array($result)) {

										$semDB=$line1['Semesterkuerzel'];

									}

								?>


								<br><br>
								Kursname:
								<br>

								<select id="Kursname" name="Kursname" required="required"  onchange="reloadpage1()">

								   <?php

									include 'db.php';



									preg_match("/:(.*)/", $Lehrer, $output_array);

									$Lehrer=$output_array[1];



									$y=0;







									$isEntry= "Select Kurs1, Kurs2, Kurs3, Kurs4, Kurs5, Kurs6, Kurs7, Kurs8, Kurs9,Kurs10,Kurs11,Kurs12,Kurs13,Kurs14,Kurs15,Kurs16,Kurs17, Kurs18, Kurs19, Kurs20, Kurs21, Kurs22, Kurs23, Kurs24, Kurs25,Kurs26,Kurs27,Kurs28,Kurs29,Kurs30 From sv_Lehrpersonen Where ID = $Lehrer";

									$result = mysqli_query($con,$isEntry);



								 echo "<option>" . $sel1 . "</option>";




									while( $line2= mysqli_fetch_array($result))

									{

										for($x = 1; $x <= 30; $x++)

										{



											$value = $line2['Kurs'.$x];

											if ($value<>"") echo "<option>" . $value . "</option>";



										}

									}

									?>



								</select>


								<br><br>

								<?
								include 'db.php';
								$isEntry = "Select * From sv_Settings ";
								$result = mysqli_query($con, $isEntry);

								while ($line1 = mysqli_fetch_array($result)) {

									$semDB=$line1['Semesterkuerzel'];

								}

								?>
								<input id="semDB" type="hidden" value="<? echo $semDB; ?>" >

								<h1>Noten</h1>

								<div class="left">
								<div class="container">
									<div class="row">
										<form class="col-md4"></form>
									</div>
									<div class="row">
										<div class="col md12">
											<table class="table table-striped table-hover datatables10" width="1000px">
												<thead>
													<tr>
														<th></th>
														<th>ID</th>
														<th>Nachname</th>
														<th>Vorname</th>											 
														<th>Notenschnitt</th>
														<th></th>
														<th></th>
													</tr>
												</thead>
												<tbody></tbody>
											</table>
										</div>
									</div>
								</div>
								</div>
								<br><br>


								<br><br>
								<h1>Abwesenheiten</h1>

								<div class="left">
								<div class="container">
									<div class="row">
										<form class="col-md4"></form>
									</div>
									<div class="row">
										<div class="col md12">
											<table class="table table-striped table-hover datatables11" width="1000px">
												<thead>
													<tr>
														<th></th>
														<th>ID</th>
														<th>Nachname</th>
														<th>Vorname</th>
														<th>Abwesenheiten Gesamt</th>
													</tr>
												</thead>
												<tbody></tbody>
											</table>
										</div>
									</div>
								</div>
								</div>


								<div id="myModal" class="modal"  onhide="tableshow()">

									<!-- Modal content -->
									<div class="modal-content">

									  Schüler:     <input id="Schuelerlb"  readonly>
									  Kurs:        <input id="Kurslb" readonly><br><br>


											<p>Unten werden die Noten des Schülers angezeigt. In die Tabelle klicken um die jeweilige Note zu bearbeiten</p>

								<div class="leftn">
								<div class="container">
									<div class="row">
										<form class="col-md4"></form>
									</div>
									<div class="row">
										<div class="col md12">
											<div class="table-responsive">
											<table  class="table table-striped table-hover datatablesmod">
												<thead>
													<tr>	
														<th></th>
														<th>Name</th>
														<th>Gewichtung</th>
														<th>Note</th>
														<th>Datum</th>
													</tr>
												</thead>
												<tbody></tbody>
											</table>
											</div>
										</div>
									</div>
								</div>
										</div>          
									  <span class="close" onclick="reloadpage1()" id="span">&times;</span>





									</div>

								</div>


								<div id="myModal2" class="modal">

									<!-- Modal content -->
									<div class="modal-content">


								Schüler:     <input id="Schuelerlb1" readonly>                       
								Kurs:        <input id="Kurslb1" readonly><br><br>




											<p>Bitte hier eine neue Note eintragen..</p>

											<input id="schid" type="hidden"  />
											<input id="Notecr" type="Text" onchange="iskomma(this)" required="required" />
											<br><br>
											Prüfungsname:<br>
											<input id="Namecr" type="Text"  required="required" />
											<br><br>
											Gewichtung(1 => Normalnote):<br>
											<input id="Gewichtungcr" type="number"  required="required" />
											<br><br>
											Datum:<br>
											<input id="Datumcr" type="date"  required="required" />
											 <br>
										<div id="cnote"></div>     
										<br>
											<input name="Speichern" type="button" value="Senden" onclick="sendNote()" />

										<span class="close" onclick="reloadpage1()" id="span2">&times;</span>



									</div>

								</div>

								<script>

									 function test(){


											if (window.XMLHttpRequest) {

												// code for IE7+, Firefox, Chrome, Opera, Safari

												xmlhttp = new XMLHttpRequest();

											} else {

												// code for IE6, IE5

												xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

											}

											xmlhttp.onreadystatechange = function() {

												if (this.readyState == 4 && this.status == 200) {

													document.getElementById("test").innerHTML = this.responseText;

												}

											};

											xmlhttp.open("GET","/wp-content/themes/structr/Page_Scripts/GetNotenValues.php?q=" +  document.getElementById( "Kursname" ).value + "&s=" + document.getElementById( "semDB" ).value,true);

											xmlhttp.send();



									}

									 function test1(){


											if (window.XMLHttpRequest) {

												// code for IE7+, Firefox, Chrome, Opera, Safari

												xmlhttp = new XMLHttpRequest();

											} else {

												// code for IE6, IE5

												xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

											}

											xmlhttp.onreadystatechange = function() {

												if (this.readyState == 4 && this.status == 200) {

													document.getElementById("test").innerHTML = this.responseText;

												}

											};

											xmlhttp.open("GET","/wp-content/themes/structr/Page_Scripts/GetAbwValues.php?k=" +  document.getElementById( "Kursname" ).value + "&s=" + document.getElementById( "semDB" ).value,true);

											xmlhttp.send();



									}


									function iskomma(str) {

								  if (str.value.indexOf(",")>0)
									{
									 x = str.value;
									 y = x.replace(",", ".");				  
									 alert( 'Bitte "." statt "," verwenden!');
									 str.value=y;				  															 
									}
								}

									function timeout(){
											setTimeout(function(){

									tableshow();
									//do what you need here
								}, 2000);

									}

										function loadeditor(str){	



									editor10 = new $.fn.dataTable.Editor( {
										ajax: {
											url: "/wp-content/themes/structr/Page_Scripts/notenvalues.php",
											type: 'POST',
											data: {
											  'SchIDnr': str,
												'KID': document . getElementById( "Kursname" ) . value ,
												'UID': document . getElementById( "UID" ) . value 



											}
										}, 

										table: ".datatablesmod",
										fields: [ {
											 label: "KursID:",
												name: "KursID",
												type: "readonly",
												def: document.getElementById( "Kursname" ).value
										},		
												  {
											 label: "SchuelerID:",
												name: "SchuelerID",
												type: "readonly",

										},			
												 { 
												label: "Name:",
												name: "Name"
											}, {
												label: "Gewichtung:",
												name: "Gewichtung"
											}, {
												label: "Note:",
												name: "Note",

											}, {
												label: "Datum:",
												name: "Datum"
												 
											}

										],i18n: {
											remove: {
												button: "Löschen",
												title:  "Eintrag löschen",
												submit: "Endgültig Löschen",
												confirm: {
													_: 'Sind Sie sicher, dass Sie die %d ausgwählten Zeilen löschen wollen?',
													1: 'Sind Sie sicher, dass Sie die ausgewählte Zeile löschen wollen?'
												}
											},
											edit: {
												button: "Bearbeiten",
												title:  "Eintrag bearbeiten",
												submit: "Änderungen speichern"
											},
											create: {
												button: "Neuer Eintrag",
												title:  "Neuen Eintrag anlegen",
												submit: "Neuen Eintrag speichern"
											},
											datetime: {
													previous: 'Zurück',
													next:     'Weiter',
													months:   [ 'Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember' ],
													weekdays: [ 'So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa' ],
													amPm:     [ 'am', 'pm' ],
													unknown:  '-'
											},
											error: {            
													system: "Ein Systemfehler ist aufgetreten (<a target=\"_blank\" href=\"//datatables.net/tn/12\">Für mehr Informationen</a>)."
											},
											multi: {
													title: "Mehrere Werte",         
													info: "Die ausgewählten Elemente enthalten verschiedene Werte für das Feld. Um alle Elemente für diess Feld auf den gleichen Wert zu setzen, klicken Sie bitte hier. Ansonsten werden die Elemente ihren jeweiligen Wert behalten.",
													restore: "Änderungen rückgängig machen",
													noMulti: "Dieses Feld kann einzeln bearbeitet werden, aber nicht als Teil einer Gruppe."
											},
										}      
									} );


										  // Activate an inline edit on click of a table cell
									$('.datatablesmod').on( 'click', 'tbody td:not(:first-child)', function (e) {
										editor10.inline( this, {
											buttons: { label: '&gt;', fn: function () { this.submit();


																					  } }
										} );
									} );



									}


									function loadtable(str){

											tableedit10 = $( '.datatablesmod' ).DataTable( {


											dom: "Bfrtip",
										ajax:{
											url: "/wp-content/themes/structr/Page_Scripts/notenvalues.php",
											type: 'POST',
											data: {
												  'SchIDnr': str,
												'KID': document . getElementById( "Kursname" ) . value ,
												'UID': document . getElementById( "UID" ) . value 

											}
										}, 

												 columns: [

												 {
												data: null,
												defaultContent: '',
												className: 'select-checkbox',
												orderable: false
											},


									{
													data: 'Name'

												},
													  {
														  data: 'Gewichtung'

												},
													  {

														  data: 'Note'

												},

													  {

														  data: 'Datum'

												}
											],
											select: true,
										buttons: [

										],"language": {
											"decimal": ",",
											"thousands": ".",
											"info": "Anzeige _START_ bis _END_ von _TOTAL_ Einträgen",
											"infoEmpty": "Keine Einträge",
											"infoPostFix": "",
											"infoFiltered": "(gefiltert aus insgesamt _MAX_ Einträgen)",
											"loadingRecords": "keine Daten vorhanden...",
											"lengthMenu": "Anzeigen von _MENU_ Einträgen",
											"paginate": {
												"first": "Erste",
												"last": "Letzte",
												"next": "Nächste",
												"previous": "Zurück"
											},
											"processing": "Verarbeitung läuft ...",
											"search": "Suche:",
											"searchPlaceholder": "Suchbegriff",
											"zeroRecords": "Keine Daten! Bitte ändern Sie Ihren Suchbegriff.",
											"emptyTable": "Keine Daten vorhanden",
											"aria": {
												"sortAscending":  ": aktivieren, um Spalte aufsteigend zu sortieren",
												"sortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
											},
											//only works for built-in buttons, not for custom buttons
											"buttons": {
												"create": "Neu",
												"edit": "Ändern",
												"remove": "Löschen",
												"copy": "Kopieren",
												"csv": "CSV-Datei",
												"excel": "Excel-Tabelle",
												"pdf": "PDF-Dokument",
												"print": "Drucken",
												"colvis": "Spalten Auswahl",
												"collection": "Auswahl",
												"upload": "Datei auswählen...."
											},
											"select": {
												"rows": {
													_: '%d Zeilen ausgewählt',
													0: 'Zeile anklicken um auszuwählen',
													1: 'Eine Zeile ausgewählt'
												}
											}
										}            


										} );



									tableedit10
										.on( 'select', function ( e, dt, type, indexes ) {
											editor10.edit( indexes, {
												title: 'Note bearbeiten',
												buttons: [
													  {


														label: 'Speichern',
														fn: function () {
															setTimeout(function(){

									
									//do what you need here
								}, 2000);
															editor10

																.submit();

														}
													},





													{


														label: 'Löschen',
														fn: function () {
															setTimeout(function(){

									//do what you need here
								}, 2000);
															editor10
																.remove( indexes, false )
																.submit();

														}
													}

												]
											} );
										} )
										.on( 'deselect', function () {


											editor10.close();

										} );


								}


                                  function tbls(){
									 
									   if (table11)
											 {
										 table11.destroy();
											 }
										 if (table10)
											 {
										 table10.destroy();
											 }
									  // alert();
								  }

									function reloadpage()
								{

								var Kursnme = document.getElementById( "Kursname" ).value;

								var encrypted = btoa(Kursnme);

								//	test();
									//test1();
									tableshow();
								//U2FsdGVkX18ZUVvShFSES21qHsQEqZXMxQ9zgHy+bu0=

								window.location.href= "/uebersichtlehrer?q=" + encrypted;

								}
									function reloadpage1()
								{
 
								var Kursnme = document.getElementById( "Kursname" ).value;

								var encrypted = btoa(Kursnme);

								//	test();
								//	test1();
									tableshow();
								//U2FsdGVkX18ZUVvShFSES21qHsQEqZXMxQ9zgHy+bu0=
	                               window.location.href= "/uebersichtlehrer?q=" + encrypted+"#Notenbuch";

								}
									 function tableshow() {
										  
									   if (table11)
											 {
										 table11.destroy();
											 }
										 if (table10)
											 {
										 table10.destroy();
											 }
									  // alert();
										

										 var urlParams = new URLSearchParams(window.location.search);
									//	var Kursnameenc = urlParams.get('q');	
										//var Kursname = atob(Kursnameenc);

                                         	var Kursname = document.getElementById( "Kursname" ).value;

                                       //  setTimeout(tbls(),500);
										

										 var url3 = "/wp-content/themes/structr/Page_Scripts/GetNotenValues.php?q=" + Kursname + "&s=" + document.getElementById( "semDB" ).value;
										var url4 = "/wp-content/themes/structr/Page_Scripts/GetAbwValues.php?k=" +Kursname + "&s=" + document.getElementById( "semDB" ).value;
										 $.fn.dataTable.ext.errMode = 'throw';
									table10 = $( '.datatables10' ).DataTable( {



										responsive:false,
										ajax: {

											url: url3,

											dataSrc: ""
										},
										columns: [ 

											{
											className: 'details-control',
											defaultContent: '',
											data: null,
											orderable: false

										},


											{
												data: 'IDSchueler'
											},
											{
												data: 'Nachname'
											},
											{
												data: 'Vorname'
											},
											{
												data: 'Notenschnitt'
											},
											{
												className: 'details-control1',
												defaultContent: '',
												data: null,
												orderable: false,
												title:' Noten Bearbeiten'


											},

											{
												className: 'details-control2',
												defaultContent: '',
												data: null,
												orderable: false,
												title:'Neue Note erstellen'
											},
										],"language": {
											"decimal": ",",
											"thousands": ".",
											"info": "Anzeige _START_ bis _END_ von _TOTAL_ Einträgen",
											"infoEmpty": "Keine Einträge",
											"infoPostFix": "",
											"infoFiltered": "(gefiltert aus insgesamt _MAX_ Einträgen)",
											"loadingRecords": "keine Daten vorhanden...",
											"lengthMenu": "Anzeigen von _MENU_ Einträgen",
											"paginate": {
												"first": "Erste",
												"last": "Letzte",
												"next": "Nächste",
												"previous": "Zurück"
											},
											"processing": "Verarbeitung läuft ...",
											"search": "Suche:",
											"searchPlaceholder": "Suchbegriff",
											"zeroRecords": "Keine Daten! Bitte ändern Sie Ihren Suchbegriff.",
											"emptyTable": "Keine Daten vorhanden",
											"aria": {
												"sortAscending":  ": aktivieren, um Spalte aufsteigend zu sortieren",
												"sortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
											},
											//only works for built-in buttons, not for custom buttons
											"buttons": {
												"create": "Neu",
												"edit": "Ändern",
												"remove": "Löschen",
												"copy": "Kopieren",
												"csv": "CSV-Datei",
												"excel": "Excel-Tabelle",
												"pdf": "PDF-Dokument",
												"print": "Drucken",
												"colvis": "Spalten Auswahl",
												"collection": "Auswahl",
												"upload": "Datei auswählen...."
											},
											"select": {
												"rows": {
													_: '%d Zeilen ausgewählt',
													0: 'Zeile anklicken um auszuwählen',
													1: 'Eine Zeile ausgewählt'
												}
											}
										}            

									} );





									$( '.datatables10 tbody' ).on( 'click', 'td.details-control', function () {
										var tr = $( this ).closest( 'tr' ),
											row = table10.row( tr );

										if ( row.child.isShown() ) {
											tr.next( 'tr' ).removeClass( 'details-row' );
											 row.child.hide();

											tr.removeClass( 'shown' );
										} else {
											row.child( format( row.data() ) ).show();
											tr.next( 'tr' ).addClass( 'details-row' );
											tr.addClass( 'shown' );
										}
									} );

									$( '.datatables10 tbody' ).on( 'click', 'td.details-control1', function () {
										var tr = $( this ).closest( 'tr' ),
											row = table10.row( tr );
                                        if ( row.child.isShown() ) {
											tr.next( 'tr' ).removeClass( 'details-row' );
											 row.child.hide();

											tr.removeClass( 'shown' );
										} else {


										row.child( showNoten( row.data() ) ).show();
										tr.next( 'tr' ).addClass( 'details-row' );
										tr.addClass( 'shown' );
										}

									} );

									$( '.datatables10 tbody' ).on( 'click', 'td.details-control2', function () {
										var tr = $( this ).closest( 'tr' ),
											row = table10.row( tr );

                                      if ( row.child.isShown() ) {
											tr.next( 'tr' ).removeClass( 'details-row' );
											 row.child.hide();

											tr.removeClass( 'shown' );
										} else {

										row.child( neueNote( row.data() ) ).show();
										tr.next( 'tr' ).addClass( 'details-row' );
										tr.addClass( 'shown' );
										}
									} );


										 table11 = $( '.datatables11' ).DataTable( {

											responsive:false,

										ajax: {

											url: url4,

											dataSrc: ""
										},

										columns: [ 

											{
											className: 'details-control',
											defaultContent: '',
											data: null,
											orderable: false


										},

											{
												data: 'SchuelerID'
											},
											{
												data: 'Nachname'
											},
											{
												data: 'Vorname'
											},
											{
												data: 'AbwesenheitenGesamt'
											}


										],"language": {
											"decimal": ",",
											"thousands": ".",
											"info": "Anzeige _START_ bis _END_ von _TOTAL_ Einträgen",
											"infoEmpty": "Keine Einträge",
											"infoPostFix": "",
											"infoFiltered": "(gefiltert aus insgesamt _MAX_ Einträgen)",
											"loadingRecords": "keine Daten vorhanden...",
											"lengthMenu": "Anzeigen von _MENU_ Einträgen",
											"paginate": {
												"first": "Erste",
												"last": "Letzte",
												"next": "Nächste",
												"previous": "Zurück"
											},
											"processing": "Verarbeitung läuft ...",
											"search": "Suche:",
											"searchPlaceholder": "Suchbegriff",
											"zeroRecords": "Keine Daten! Bitte ändern Sie Ihren Suchbegriff.",
											"emptyTable": "Keine Daten vorhanden",
											"aria": {
												"sortAscending":  ": aktivieren, um Spalte aufsteigend zu sortieren",
												"sortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
											},
											//only works for built-in buttons, not for custom buttons
											"buttons": {
												"create": "Neu",
												"edit": "Ändern",
												"remove": "Löschen",
												"copy": "Kopieren",
												"csv": "CSV-Datei",
												"excel": "Excel-Tabelle",
												"pdf": "PDF-Dokument",
												"print": "Drucken",
												"colvis": "Spalten Auswahl",
												"collection": "Auswahl",
												"upload": "Datei auswählen...."
											},
											"select": {
												"rows": {
													_: '%d Zeilen ausgewählt',
													0: 'Zeile anklicken um auszuwählen',
													1: 'Eine Zeile ausgewählt'
												}
											}
										}            


									} );


									$( '.datatables11 tbody' ).on( 'click', 'td.details-control', function () {
										var tr = $( this ).closest( 'tr' ),
											row1 = table11.row( tr );

										if ( row1.child.isShown() ) {
											tr.next( 'tr' ).removeClass( 'details-row' );
											 row1.child.hide();


											tr.removeClass( 'shown' );
										} else {
											row1.child( format1( row1.data() ) ).show();
											tr.next( 'tr' ).addClass( 'details-row' );
											tr.addClass( 'shown' );
										}
									} );




									}

									function tableshow1() {








										 if (table11)
											 {
										 table11.destroy();
											 }
										 if (table10)
											 {
										 table10.destroy();
											 }

										 var url3 = "/wp-content/themes/structr/Page_Scripts/GetNotenValues.php?q=" + "-Select-" + "&s=" + document.getElementById( "semDB" ).value;
										var url4 = "/wp-content/themes/structr/Page_Scripts/GetAbwValues.php?k=" + "-Select-" + "&s=" + document.getElementById( "semDB" ).value;
										 $.fn.dataTable.ext.errMode = 'throw';
									table10 = $( '.datatables10' ).DataTable( {


										ajax: {

											url: url3,

											dataSrc: ""
										},
										columns: [ {
											className: 'details-control',
											defaultContent: '',
											data: null,
											orderable: false

										},


											{
												data: 'IDSchueler'
											},
											{
												data: 'Nachname'
											},
											{
												data: 'Vorname'
											},
											{
												data: 'Notenschnitt'
											},
											{
												className: 'details-control1',
												defaultContent: '',
												data: null,
												orderable: false,
												title:' Noten Bearbeiten'


											},

											{
												className: 'details-control2',
												defaultContent: '',
												data: null,
												orderable: false,
												title:'Neue Note erstellen'
											},
										],"language": {
											"decimal": ",",
											"thousands": ".",
											"info": "Anzeige _START_ bis _END_ von _TOTAL_ Einträgen",
											"infoEmpty": "Keine Einträge",
											"infoPostFix": "",
											"infoFiltered": "(gefiltert aus insgesamt _MAX_ Einträgen)",
											"loadingRecords": "keine Daten vorhanden...",
											"lengthMenu": "Anzeigen von _MENU_ Einträgen",
											"paginate": {
												"first": "Erste",
												"last": "Letzte",
												"next": "Nächste",
												"previous": "Zurück"
											},
											"processing": "Verarbeitung läuft ...",
											"search": "Suche:",
											"searchPlaceholder": "Suchbegriff",
											"zeroRecords": "Keine Daten! Bitte ändern Sie Ihren Suchbegriff.",
											"emptyTable": "Keine Daten vorhanden",
											"aria": {
												"sortAscending":  ": aktivieren, um Spalte aufsteigend zu sortieren",
												"sortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
											},
											//only works for built-in buttons, not for custom buttons
											"buttons": {
												"create": "Neu",
												"edit": "Ändern",
												"remove": "Löschen",
												"copy": "Kopieren",
												"csv": "CSV-Datei",
												"excel": "Excel-Tabelle",
												"pdf": "PDF-Dokument",
												"print": "Drucken",
												"colvis": "Spalten Auswahl",
												"collection": "Auswahl",
												"upload": "Datei auswählen...."
											},
											"select": {
												"rows": {
													_: '%d Zeilen ausgewählt',
													0: 'Zeile anklicken um auszuwählen',
													1: 'Eine Zeile ausgewählt'
												}
											}
										}            

									} );





									$( '.datatables10 tbody' ).on( 'click', 'td.details-control', function () {
										var tr = $( this ).closest( 'tr' ),
											row = table.row( tr );


										if ( row.child.isShown() ) {
											tr.next( 'tr' ).removeClass( 'details-row' );
											 row.child.hide();

											tr.removeClass( 'shown' );
										} else {
											row.child( format( row.data() ) ).show();
											tr.next( 'tr' ).addClass( 'details-row' );
											tr.addClass( 'shown' );
										}
									} );

									$( '.datatables10 tbody' ).on( 'click', 'td.details-control1', function () {
										var tr = $( this ).closest( 'tr' ),
											row = table.row( tr );



										row.child( showNoten( row.data() ) ).show();
										tr.next( 'tr' ).addClass( 'details-row' );
										tr.addClass( 'shown' );


									} );

									$( '.datatables10 tbody' ).on( 'click', 'td.details-control2', function () {
										var tr = $( this ).closest( 'tr' ),
											row = table.row( tr );



										row.child( neueNote( row.data() ) ).show();
										tr.next( 'tr' ).addClass( 'details-row' );
										tr.addClass( 'shown' );

									} );


										 table11 = $( '.datatables11' ).DataTable( {


										ajax: {

											url: url4,

											dataSrc: ""
										},

										columns: [ 
											{
											className: '',
											defaultContent: '',
											data: null,
											orderable: false


										},

											{
											className: 'details-control',
											defaultContent: '',
											data: null,
											orderable: false


										},

											{
												data: 'SchuelerID'
											},
											{
												data: 'Nachname'
											},
											{
												data: 'Vorname'
											},
											{
												data: 'AbwesenheitenGesamt'
											}


										],"language": {
											"decimal": ",",
											"thousands": ".",
											"info": "Anzeige _START_ bis _END_ von _TOTAL_ Einträgen",
											"infoEmpty": "Keine Einträge",
											"infoPostFix": "",
											"infoFiltered": "(gefiltert aus insgesamt _MAX_ Einträgen)",
											"loadingRecords": "keine Daten vorhanden...",
											"lengthMenu": "Anzeigen von _MENU_ Einträgen",
											"paginate": {
												"first": "Erste",
												"last": "Letzte",
												"next": "Nächste",
												"previous": "Zurück"
											},
											"processing": "Verarbeitung läuft ...",
											"search": "Suche:",
											"searchPlaceholder": "Suchbegriff",
											"zeroRecords": "Keine Daten! Bitte ändern Sie Ihren Suchbegriff.",
											"emptyTable": "Keine Daten vorhanden",
											"aria": {
												"sortAscending":  ": aktivieren, um Spalte aufsteigend zu sortieren",
												"sortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
											},
											//only works for built-in buttons, not for custom buttons
											"buttons": {
												"create": "Neu",
												"edit": "Ändern",
												"remove": "Löschen",
												"copy": "Kopieren",
												"csv": "CSV-Datei",
												"excel": "Excel-Tabelle",
												"pdf": "PDF-Dokument",
												"print": "Drucken",
												"colvis": "Spalten Auswahl",
												"collection": "Auswahl",
												"upload": "Datei auswählen...."
											},
											"select": {
												"rows": {
													_: '%d Zeilen ausgewählt',
													0: 'Zeile anklicken um auszuwählen',
													1: 'Eine Zeile ausgewählt'
												}
											}
										}            


									} );


									$( '.datatables11 tbody' ).on( 'click', 'td.details-control', function () {
										var tr = $( this ).closest( 'tr' ),
											row1 = table11.row( tr );

										if ( row1.child.isShown() ) {
											tr.next( 'tr' ).removeClass( 'details-row' );
											 row1.child.hide();


											tr.removeClass( 'shown' );
										} else {
											row1.child( format1( row1.data() ) ).show();
											tr.next( 'tr' ).addClass( 'details-row' );
											tr.addClass( 'shown' );
										}
									} );




									}

									function sleep(miliseconds) {
								   var currentTime = new Date().getTime();

								   while (currentTime + miliseconds >= new Date().getTime()) {
								   }
								}

								function sendNote(){
									if ( window.XMLHttpRequest ) {

												// code for IE7+, Firefox, Chrome, Opera, Safari

												xmlhttp = new XMLHttpRequest();

											} else {

												// code for IE6, IE5

												xmlhttp = new ActiveXObject( "Microsoft.XMLHTTP" );

											}
                                              xmlhttp.onreadystatechange = function() {

												if (this.readyState == 4 && this.status == 200) {

													document.getElementById("cnote").innerHTML = this.responseText;

												}

											};


											xmlhttp.open( "GET", "/Ajax_Scripts/createNote.php?q=" + document.getElementById( "Kursname" ).value+"&k="+ document.getElementById("schid").value +"&l=" +document.getElementById("Notecr").value +"&m="+ document.getElementById("Namecr").value +"&n=" +document.getElementById("Gewichtungcr").value +"&o="+document.getElementById("Datumcr").value +"&p="+document.getElementById("UID").value, true );

											xmlhttp.send();

									setTimeout(function(){
										 document.getElementById("Notecr").value = "";
									 document.getElementById("Namecr").value = "";
									 document.getElementById("Gewichtungcr").value = "";
									 document.getElementById("Datumcr").value = "";
							
									//do what you need here
								}, 2000);



									}

										function getK() {

											alert();
										}

										function getKursname(){







											if (window.XMLHttpRequest) {

												// code for IE7+, Firefox, Chrome, Opera, Safari

												xmlhttp = new XMLHttpRequest();

											} else {

												// code for IE6, IE5

												xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

											}

											xmlhttp.onreadystatechange = function() {

												if (this.readyState == 4 && this.status == 200) {

													document.getElementById("Kursname").innerHTML = this.responseText;

												}

											};

											xmlhttp.open("GET","/Ajax_Scripts/getKursnameLehrer.php?q="+ document.getElementById('lehrer').value + "&s="  +  document.getElementById('semester').value,true);

											xmlhttp.send();

										}


								</script>


								<style>
									.left {
								  float: auto;
								  width: 100%;
								  padding: 5px;
								  border: 1px solid black;
								  text-align: center;
											overflow-y:auto;
								}
									.leftn {
								  float: auto;
								  width: 100%;
								  padding: 5px;
								  border: 0px solid;
								  text-align: center;
											overflow-y:auto;
								}
								}
									body {
										font-family: "Dosis", "Helvetica Neue", sans-serif;
										color: #232323;
									}

									#calendar {
										max-width: 900px;
										margin: 0 auto;
									}

								</style>

										 </div>
<div class="leftn">
	<br>
</div>
  <div class="left">
   <h4>Abwesenheiten meiner Lernenden</h4>
 

<?php

include 'db.php';



global $current_user;

get_currentuserinfo();



/* echo 'Username: ' . $current_user-&gt;user_login . "\n";

echo 'User email: ' . $current_user-&gt;user_email . "\n";

echo 'User level: ' . $current_user-&gt;user_level . "\n";

echo 'User first name: ' . $current_user-&gt;user_firstname . "\n";

echo 'User last name: ' . $current_user-&gt;user_lastname . "\n";

echo 'User display name: ' . $current_user-&gt;display_name . "\n";

echo 'User ID: ' . $current_user-&gt;ID . "\n";



*/

$heute=date("Y-m-d");



?>

<br><br>



Lehrperson:

<br>

<?php



$isEntry= "Select ID From sv_Lehrpersonen where User_ID=$current_user->ID";

$result = mysqli_query($con, $isEntry);



while( $line2= mysqli_fetch_assoc($result))

{

    $value=$line2['ID'];

    $isEntry= "Select Nachname, Vorname From sv_Lehrpersonen WHERE ID='$value'";

    $result = mysqli_query($con, $isEntry);

    while( $line3= mysqli_fetch_array($result))

    {

        $Name = $line3['Nachname'];

        $Vorname = $line3['Vorname'];



    }


    echo '<input class="insertframe" id="lehrer" name="lehrer" readonly="readonly" type="text" value="'.$Vorname .' '.$Name .' ID:'. $value .'" />' ;

    $Lehrer=$Vorname .' '.$Name .' ID:'. $value;

}

?>



<br><br>

<h1>Abwesenheitsübersicht</h1>
<div class="bck">
  <div class="row">
    <form class="col-md4"></form>
  </div>
  <div class="row">
    <div class="col md12">
      <table class="table table-striped table-hover datatables" width="80%">
        <thead>
          <tr>
            <th></th>
            <th>Klasse</th>
            <th>Kursname</th>
			<th>Datum</th>
	        <th>Kommentar</th>
			  <th>KommentVer</th>
            <th>Abwesenheitsdauer</th>
			<th>Nachname</th>
	        <th>Vorname</th>
		    <th>Lehrer</th>
			  <th>Entschuldigt</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
	  </div>
 
<br><br>

 </div>
<div class="leftn">
	<br>
</div>
  <div class="left">
    <h4>Meine Kurshistorie</h4>
<br><br>

Lehrperson:

<br>

<?php



$isEntry= "Select ID From sv_Lehrpersonen where User_ID=$current_user->ID";

$result = mysqli_query($con, $isEntry);



while( $line2= mysqli_fetch_assoc($result))

{

    $value=$line2['ID'];

    $isEntry= "Select Nachname, Vorname From sv_Lehrpersonen WHERE ID='$value'";

    $result = mysqli_query($con, $isEntry);

    while( $line3= mysqli_fetch_array($result))

    {

        $Name = $line3['Nachname'];

        $Vorname = $line3['Vorname'];



    }


    echo '<input class="insertframe" id="lehrer" name="lehrer" readonly="readonly" type="text" value="'.$Vorname .' '.$Name .' ID:'. $value .'" />' ;

    $Lehrer=$Vorname .' '.$Name .' ID:'. $value;

}

?>

<br><br>

<br><br>


<h1>Kurshistorie</h1>

<div class="bck">
  
      <table class="table table-striped table-hover datatables2" width="80%">
        <thead>
          <tr>
            <th>ID</th>
            <th>Stattgefunden</th>
			<th>Datum</th>
	        <th>KursID</th>
			  <th>Lehrer</th>
            <th>Kommentar</th>
			<th>Lektionen</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

 
<br><br>





  </div>
  <div class="clear"></div>
</div>


</form>&nbsp;

<style>
	ax:hover {
		background:lightgrey;
    cursor: pointer; }

	

	
	
.insertframe{
    font-family: arial, sans-serif;
    width: 80%;
    height: 26px;
    vertical-align: middle;
	text-align: center;
    font-size: 15px;
}
	.bck{
		z-index: 999;
		overflow-y:auto;
	}
	table{
table-layout:auto;
}
    body {
        font-family:"Dosis", "Helvetica Neue", sans-serif;
        color:#232323;
    }

    #calendar {
        max-width: 600px;
		 max-height: 500px;
        margin: 0 auto;
    }

</style>


